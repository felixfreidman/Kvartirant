"use strict";var userArea,customSelect,selectContainer,selectOptions,savedString,userBudget,value,budgetInput,getRoomsAmount,getRepairPrefs,getColiverPrefs,submitForm,roomsAmount,budget,areaSearch,repairPrefs,coliverPrefs,prefsObject,checkboxesRepair=document.querySelectorAll(".repairCheckbox"),resetRepair=document.querySelector(".resetCheckboxRepair"),checkboxesColiver=document.querySelectorAll(".coliverCheckbox"),resetColiver=document.querySelector(".resetCheckboxColiver"),checkboxesRoom=document.querySelectorAll(".roomCheckbox"),resetRoom=document.querySelector(".resetCheckboxRoom");function resetCheckboxRepair(){var t=0;checkboxesRepair.forEach(function(e){e.classList.contains("custom-checkbox--active")&&t++,1<t&&resetRepair.classList.remove("custom-checkbox--active"),0==t&&resetRepair.classList.add("custom-checkbox--active")})}function resetCheckboxColiver(){var t=0;checkboxesColiver.forEach(function(e){e.classList.contains("custom-checkbox--active")&&t++,1<t&&resetColiver.classList.remove("custom-checkbox--active"),0==t&&resetColiver.classList.add("custom-checkbox--active")})}function resetCheckboxRoom(){var t=0;checkboxesRoom.forEach(function(e){e.classList.contains("custom-checkbox--active")&&t++}),0==t&&resetRoom.classList.add("custom-checkbox--active")}checkboxesRepair.forEach(function(e){e.addEventListener("click",function(){e.classList.contains("resetCheckboxRepair")?e.classList.contains("resetCheckboxRepair")&&checkboxesRepair.forEach(function(e){e.classList.remove("custom-checkbox--active"),resetRepair.classList.add("custom-checkbox--active")}):(e.classList.toggle("custom-checkbox--active"),setTimeout(resetCheckboxRepair,100))})}),checkboxesColiver.forEach(function(e){e.addEventListener("click",function(){e.classList.contains("resetCheckboxColiver")?e.classList.contains("resetCheckboxColiver")&&checkboxesColiver.forEach(function(e){e.classList.remove("custom-checkbox--active"),resetColiver.classList.add("custom-checkbox--active")}):(e.classList.toggle("custom-checkbox--active"),setTimeout(resetCheckboxColiver,100))})}),checkboxesRoom.forEach(function(e){e.addEventListener("click",function(){e.classList.toggle("custom-checkbox--active"),setTimeout(resetCheckboxRoom,100)})}),window.location.href.includes("prefs")&&setTimeout(function(){var t,c,o;""!==document.querySelector(".userMeta").textContent&&(t=document.querySelector(".userRoom"),checkboxesRoom.forEach(function(e){e.classList.remove("custom-checkbox--active"),(t.textContent.includes("1")&&e.textContent.includes("1")||t.textContent.includes("2")&&e.textContent.includes("2")||t.textContent.includes("3")&&e.textContent.includes("3")||t.textContent.includes("4+")&&e.textContent.includes("4+")||t.textContent.includes("4")&&e.textContent.includes("4")&&!t.textContent.includes("+")&&!e.textContent.includes("+"))&&e.classList.add("custom-checkbox--active")}),c=document.querySelector(".userRepair"),checkboxesRepair.forEach(function(e){e.classList.remove("custom-checkbox--active"),(c.textContent.includes("бабушкин")&&e.textContent.includes("бабушкин")||c.textContent.includes("Косметический")&&e.textContent.includes("Косметический")||c.textContent.includes("Дизайнерский")&&e.textContent.includes("Дизайнерский")||c.textContent.includes("Не важно")&&e.textContent.includes("важно"))&&e.classList.add("custom-checkbox--active")}),o=document.querySelector(".userColiver"),checkboxesColiver.forEach(function(e){e.classList.remove("custom-checkbox--active"),(o.textContent.includes("Собака")&&e.textContent.includes("Собака")||o.textContent.includes("Кот")&&e.textContent.includes("Кот")||o.textContent.includes("Другие")&&e.textContent.includes("Другие")||o.textContent.includes("Не важно")&&e.textContent.includes("важно"))&&e.classList.add("custom-checkbox--active")}))},300),document.getElementById("customSelect")&&(userArea=document.querySelector(".userArea"),customSelect=document.getElementById("customSelect"),selectContainer=document.querySelector(".pref-slide__select-container"),selectOptions=selectContainer.querySelectorAll(".pref-slide__option"),savedString=customSelect.textContent,customSelect.addEventListener("click",function(){setTimeout(function(){selectContainer.classList.remove("js--hidden")},100)}),window.onclick=function(e){e.target==selectContainer||e.target.classList.contains("pref-slide__option")||e.target.classList.contains("pref-slide__select")||selectContainer.classList.add("js--hidden")},selectOptions.forEach(function(e,t){e.addEventListener("click",function(){0!=t?(selectOptions[0].classList.remove("pref-slide__option--active"),e.classList.contains("pref-slide__option--active")?(e.classList.remove("pref-slide__option--active"),customSelect.textContent.includes(", ".concat(e.textContent.slice(0,5)))?customSelect.textContent=customSelect.textContent.replace(", ".concat(e.textContent.slice(0,5)),""):customSelect.textContent=customSelect.textContent.replace("".concat(e.textContent.slice(0,5)),""),""==customSelect.textContent.trim()&&(customSelect.textContent="Все районы",selectOptions[0].classList.add("pref-slide__option--active"))):e.classList.contains("pref-slide__option--active")?(e.classList.add("pref-slide__option--active"),customSelect.textContent=customSelect.textContent.replace("Все районы",""),""==customSelect.textContent?customSelect.textContent="".concat(e.textContent.slice(0,5)):customSelect.textContent="".concat(customSelect.textContent,", ").concat(e.textContent.slice(0,5))):(e.classList.add("pref-slide__option--active"),customSelect.textContent=customSelect.textContent.replace("Все районы",""),customSelect.textContent="".concat(customSelect.textContent," ").concat(e.textContent.slice(0,5)))):(selectOptions.forEach(function(e){e.classList.remove("pref-slide__option--active")}),e.classList.add("pref-slide__option--active"),customSelect.textContent="Все районы")})}),""!==userArea.textContent)&&(customSelect.textContent=userArea.textContent,selectOptions.forEach(function(e){(userArea.textContent.includes("Лен")&&e.textContent.includes("Лен")||userArea.textContent.includes("Окт")&&e.textContent.includes("Окт")||userArea.textContent.includes("Свер")&&e.textContent.includes("Свер")||userArea.textContent.includes("Право")&&e.textContent.includes("Право")||userArea.textContent.includes("Все")&&e.textContent.includes("Все"))&&(e.classList.add("pref-slide__option--active"),selectOptions[0].classList.remove("pref-slide__option--active"))})),document.getElementById("userBudgetInput")&&(userBudget=document.querySelector(".userBudget"),value=5e4,""!==userBudget.textContent&&(value=parseInt(userBudget.textContent),$("#userBudgetInput").val(value)),$(function(){$("#userBudget").slider({range:"min",min:0,max:2e5,step:1e3,value:value,slide:function(e,t){$("#userBudgetInput").val(t.value)}})}),(budgetInput=document.getElementById("userBudgetInput")).addEventListener("input",function(){var e=budgetInput.value;$("#userBudget").slider("value",e)})),document.querySelector(".submitForm")&&(getRoomsAmount=function(){document.querySelectorAll(".roomCheckbox").forEach(function(e){e.classList.contains("custom-checkbox--active")&&(e=e.textContent,roomsAmount=roomsAmount+e+", ")}),roomsAmount=(roomsAmount=roomsAmount.trim()).slice(0,roomsAmount.length-1)},getRepairPrefs=function(){document.querySelectorAll(".repairCheckbox").forEach(function(e){e.classList.contains("custom-checkbox--active")&&(e=e.getAttribute("data-value"),repairPrefs=repairPrefs+e+", ")}),repairPrefs=(repairPrefs=repairPrefs.trim()).slice(0,repairPrefs.length-1)},getColiverPrefs=function(){document.querySelectorAll(".coliverCheckbox").forEach(function(e){e.classList.contains("custom-checkbox--active")&&(e=e.getAttribute("data-value"),coliverPrefs=coliverPrefs+e+", ")}),coliverPrefs=(coliverPrefs=coliverPrefs.trim()).slice(0,coliverPrefs.length-1)},submitForm=document.querySelector(".submitForm"),prefsObject={roomsAmount:coliverPrefs=repairPrefs=areaSearch=budget=roomsAmount="",budget:"",areaSearch:"",repairPrefs:"",coliverPrefs:""},submitForm.addEventListener("click",function(){submitForm.classList.add("js--inactive"),getRoomsAmount(),getRepairPrefs(),getColiverPrefs(),budget=document.getElementById("userBudgetInput").value,areaSearch=document.getElementById("customSelect").textContent;var e=document.getElementById("roomsAmount"),t=document.getElementById("budgetAmount"),c=document.getElementById("areaSearch"),o=document.getElementById("repairPrefs"),n=document.getElementById("coliverPrefs");e.value=roomsAmount,t.value=budget,c.value=areaSearch,o.value=repairPrefs,n.value=coliverPrefs,document.getElementById("prefsForm").submit()}));var sliderContainers=document.querySelectorAll(".swiper-adt"),allNextButtons=(sliderContainers.forEach(function(e,t){var c=e.querySelector(".swiper-pagination");e.classList.add("swiper-adt--".concat(t)),c.classList.add("swiper-pagination--".concat(t)),new Swiper(".swiper-adt--".concat(t),{speed:400,spaceBetween:0,slidesPerView:1,effect:"cards",direction:"horizontal",loop:!0,pagination:{el:".swiper-pagination--".concat(t),clickable:!0}})}),document.querySelectorAll(".pref-slide__button")),allSlides=document.querySelectorAll(".pref-slide");function activateForms(){var e,t,c,o;document.querySelector(".signin-form")&&(e=document.querySelector(".signin-form"),t=document.querySelector(".signup-form"),c=e.querySelector(".caption"),o=t.querySelector(".caption"),c.addEventListener("click",function(){e.classList.add("js--hidden"),t.classList.remove("js--hidden")}),o.addEventListener("click",function(){e.classList.remove("js--hidden"),t.classList.add("js--hidden")}))}allNextButtons.forEach(function(e,t){2!==t&&e.addEventListener("click",function(){allSlides[t].classList.add("js--hidden"),allSlides[t+1].classList.remove("js--hidden")})}),setTimeout(activateForms,300);var account,opener,timers=document.querySelectorAll(".message-time"),formContainer=document.querySelectorAll(".chat-form");function modifyTime(){timers.forEach(function(e){var t=(t=e.textContent).slice(11,17);e.textContent=t})}function activateLogout(){var e,t;document.getElementById("menu-header")&&(e=document.getElementById("menu-header").querySelector("a"),(t=document.getElementById("logoutLink")).href=e.href,t.addEventListener("click",function(){localStorage.getItem("logged")&&(localStorage.setItem("logged",!1),document.querySelector(".account").classList.remove("account--logged"))}))}modifyTime(),setTimeout(activateLogout,300),localStorage.getItem("logged")&&"true"==localStorage.getItem("logged")&&(account=document.querySelector(".account")).classList.add("account--logged"),document.getElementById("menuOpener")&&((opener=document.getElementById("menuOpener")).addEventListener("click",function(){opener.classList.add("opener--active")}),window.onclick=function(e){e.target==opener||e.target.classList.contains("checkSpan")||opener.classList.remove("opener--active")});var allNavLinks,sectionHeader,avatarFrame,pageLocation=window.location.href,props=["Ваш профиль","Ваши сообщения"];(pageLocation.includes("profile")||pageLocation.includes("subscription"))&&(allNavLinks=document.querySelectorAll(".profile-navigation__link"),sectionHeader=document.getElementById("ProfileHeader"),avatarFrame=document.querySelector(".lk-sidebar"),allNavLinks.forEach(function(e,t){4!==t&&(e.href.includes("tab=chat")&&pageLocation.includes("tab=chat")?(e.classList.add("profile-navigation__link--active"),sectionHeader.textContent=props[1],avatarFrame.classList.add("js--hidden")):e.href.includes("user")&&pageLocation.includes("user")&&!pageLocation.includes("chat")?(e.classList.add("profile-navigation__link--active"),sectionHeader.textContent=props[0]):e.href.includes("subscription")&&pageLocation.includes("subscription")&&e.classList.add("profile-navigation__link--active"))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm1fQ3VzdG9tQ2hlY2tib3guanMiLCJmb3JtX0N1c3RvbVNlbGVjdC5qcyIsImZvcm1fU2xpZGVyLmpzIiwiZm9ybV9VcGRhdGVQcmVmcy5qcyIsInBsdWdpbl9Td2lwZXJDb25maWcuanMiLCJwcmVmc19UZXN0TG9naWMuanMiLCJwcm9maWxlX0F1dGhvcml6YXRpb24uanMiLCJwcm9maWxlX0NoYXRTZXR0aW5ncy5qcyIsInByb2ZpbGVfTG9nU3RhdHVzLmpzIiwicHJvZmlsZV9Nb2JpbGVOYXZpZ2F0aW9uLmpzIiwicHJvZmlsZV9Mb2dvdXRCdXR0b24uanMiLCJwcm9maWxlX05hdmlnYXRpb24uanMiXSwibmFtZXMiOlsidXNlckFyZWEiLCJjdXN0b21TZWxlY3QiLCJzZWxlY3RDb250YWluZXIiLCJzZWxlY3RPcHRpb25zIiwic2F2ZWRTdHJpbmciLCJ1c2VyQnVkZ2V0IiwidmFsdWUiLCJidWRnZXRJbnB1dCIsImdldFJvb21zQW1vdW50IiwiZ2V0UmVwYWlyUHJlZnMiLCJnZXRDb2xpdmVyUHJlZnMiLCJzdWJtaXRGb3JtIiwicm9vbXNBbW91bnQiLCJidWRnZXQiLCJhcmVhU2VhcmNoIiwicmVwYWlyUHJlZnMiLCJjb2xpdmVyUHJlZnMiLCJwcmVmc09iamVjdCIsImNoZWNrYm94ZXNSZXBhaXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZXNldFJlcGFpciIsInF1ZXJ5U2VsZWN0b3IiLCJjaGVja2JveGVzQ29saXZlciIsInJlc2V0Q29saXZlciIsImNoZWNrYm94ZXNSb29tIiwicmVzZXRSb29tIiwicmVzZXRDaGVja2JveFJlcGFpciIsImNvbnRyb2xTdW0iLCJmb3JFYWNoIiwicm9vbSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwicmVzZXRDaGVja2JveENvbGl2ZXIiLCJyZXNldENoZWNrYm94Um9vbSIsInJlcGFpciIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbm5lcl9jaGVja2JveCIsInRvZ2dsZSIsInNldFRpbWVvdXQiLCJjb2xpdmVyIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiaW5jbHVkZXMiLCJ1c2VyUm9vbSIsInVzZXJSZXBhaXIiLCJ1c2VyQ29saXZlciIsInRleHRDb250ZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvbmNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJvcHRpb24iLCJpbmRleCIsImNvbmNhdCIsInNsaWNlIiwicmVwbGFjZSIsInRyaW0iLCJpbm5lcl9vcHRpb24iLCJwYXJzZUludCIsIiQiLCJ2YWwiLCJzbGlkZXIiLCJyYW5nZSIsIm1pbiIsIm1heCIsInN0ZXAiLCJzbGlkZSIsInVpIiwidmFsdWVJbnB1dCIsImJveCIsImxlbmd0aCIsImdldEF0dHJpYnV0ZSIsImlucHV0Um9vbXMiLCJpbnB1dEJ1ZGdldCIsImlucHV0QXJlYSIsImlucHV0UmVwYWlycyIsImlucHV0Q29saXZlciIsInN1Ym1pdCIsInNsaWRlckNvbnRhaW5lcnMiLCJhbGxOZXh0QnV0dG9ucyIsInN3aXBlciIsInN3aXBlclBhZ2luYXRpb24iLCJTd2lwZXIiLCJzcGVlZCIsInNwYWNlQmV0d2VlbiIsInNsaWRlc1BlclZpZXciLCJlZmZlY3QiLCJkaXJlY3Rpb24iLCJsb29wIiwicGFnaW5hdGlvbiIsImVsIiwiY2xpY2thYmxlIiwiYWxsU2xpZGVzIiwiYWN0aXZhdGVGb3JtcyIsInNpZ25pbkZvcm0iLCJzaWdudXBGb3JtIiwiY2FwdGlvbkluIiwiY2FwdGlvblVwIiwiYnV0dG9uIiwiYWNjb3VudCIsIm9wZW5lciIsInRpbWVycyIsImZvcm1Db250YWluZXIiLCJtb2RpZnlUaW1lIiwidGltZXIiLCJ0aW1lclZhbHVlIiwiYWN0aXZhdGVMb2dvdXQiLCJsb2dvdXRMaW5rIiwibG9nb3V0TGlua0luTmF2IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJhbGxOYXZMaW5rcyIsInNlY3Rpb25IZWFkZXIiLCJhdmF0YXJGcmFtZSIsInBhZ2VMb2NhdGlvbiIsInBy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LCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNoZWNrYm94ZXNSZXBhaXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVwYWlyQ2hlY2tib3gnKTtcclxuY29uc3QgcmVzZXRSZXBhaXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVzZXRDaGVja2JveFJlcGFpcicpO1xyXG5jb25zdCBjaGVja2JveGVzQ29saXZlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2xpdmVyQ2hlY2tib3gnKTtcclxuY29uc3QgcmVzZXRDb2xpdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlc2V0Q2hlY2tib3hDb2xpdmVyJyk7XHJcbmNvbnN0IGNoZWNrYm94ZXNSb29tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJvb21DaGVja2JveCcpO1xyXG5jb25zdCByZXNldFJvb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVzZXRDaGVja2JveFJvb20nKTtcclxuXHJcblxyXG5cclxuY2hlY2tib3hlc1JlcGFpci5mb3JFYWNoKHJlcGFpciA9PiB7XHJcbiAgICByZXBhaXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXBhaXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZXNldENoZWNrYm94UmVwYWlyJykpIHtcclxuICAgICAgICAgICAgcmVwYWlyLmNsYXNzTGlzdC50b2dnbGUoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQocmVzZXRDaGVja2JveFJlcGFpciwgMTAwKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlcGFpci5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0Q2hlY2tib3hSZXBhaXInKSkge1xyXG4gICAgICAgICAgICBjaGVja2JveGVzUmVwYWlyLmZvckVhY2goaW5uZXJfY2hlY2tib3ggPT4ge1xyXG4gICAgICAgICAgICAgICAgaW5uZXJfY2hlY2tib3guY2xhc3NMaXN0LnJlbW92ZSgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHJlc2V0UmVwYWlyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufSlcclxuXHJcbmNoZWNrYm94ZXNDb2xpdmVyLmZvckVhY2goY29saXZlciA9PiB7XHJcbiAgICBjb2xpdmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGlmICghY29saXZlci5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0Q2hlY2tib3hDb2xpdmVyJykpIHtcclxuICAgICAgICAgICAgY29saXZlci5jbGFzc0xpc3QudG9nZ2xlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJlc2V0Q2hlY2tib3hDb2xpdmVyLCAxMDApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29saXZlci5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0Q2hlY2tib3hDb2xpdmVyJykpIHtcclxuICAgICAgICAgICAgY2hlY2tib3hlc0NvbGl2ZXIuZm9yRWFjaChpbm5lcl9jaGVja2JveCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpbm5lcl9jaGVja2JveC5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgcmVzZXRDb2xpdmVyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufSlcclxuXHJcbmNoZWNrYm94ZXNSb29tLmZvckVhY2gocm9vbSA9PiB7XHJcbiAgICByb29tLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIHJvb20uY2xhc3NMaXN0LnRvZ2dsZSgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KHJlc2V0Q2hlY2tib3hSb29tLCAxMDApO1xyXG4gICAgfSlcclxufSlcclxuXHJcblxyXG5mdW5jdGlvbiByZXNldENoZWNrYm94UmVwYWlyKCkge1xyXG4gICAgbGV0IGNvbnRyb2xTdW0gPSAwO1xyXG4gICAgY2hlY2tib3hlc1JlcGFpci5mb3JFYWNoKHJvb20gPT4ge1xyXG4gICAgICAgIGlmIChyb29tLmNsYXNzTGlzdC5jb250YWlucygnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICBjb250cm9sU3VtKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb250cm9sU3VtID4gMSkge1xyXG4gICAgICAgICAgICByZXNldFJlcGFpci5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRyb2xTdW0gPT0gMCkge1xyXG4gICAgICAgICAgICByZXNldFJlcGFpci5jbGFzc0xpc3QuYWRkKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldENoZWNrYm94Q29saXZlcigpIHtcclxuICAgIGxldCBjb250cm9sU3VtID0gMDtcclxuICAgIGNoZWNrYm94ZXNDb2xpdmVyLmZvckVhY2gocm9vbSA9PiB7XHJcbiAgICAgICAgaWYgKHJvb20uY2xhc3NMaXN0LmNvbnRhaW5zKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xTdW0rKztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbnRyb2xTdW0gPiAxKSB7XHJcbiAgICAgICAgICAgIHJlc2V0Q29saXZlci5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRyb2xTdW0gPT0gMCkge1xyXG4gICAgICAgICAgICByZXNldENvbGl2ZXIuY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzZXRDaGVja2JveFJvb20oKSB7XHJcbiAgICBsZXQgY29udHJvbFN1bSA9IDA7XHJcbiAgICBjaGVja2JveGVzUm9vbS5mb3JFYWNoKHJvb20gPT4ge1xyXG4gICAgICAgIGlmIChyb29tLmNsYXNzTGlzdC5jb250YWlucygnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICBjb250cm9sU3VtKys7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAoY29udHJvbFN1bSA9PSAwKSB7XHJcbiAgICAgICAgcmVzZXRSb29tLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5pZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ3ByZWZzJykpIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cclxuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVzZXJNZXRhJykudGV4dENvbnRlbnQgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJSb29tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVzZXJSb29tJyk7XHJcbiAgICAgICAgICAgIGNoZWNrYm94ZXNSb29tLmZvckVhY2gocm9vbSA9PiB7XHJcbiAgICAgICAgICAgICAgICByb29tLmNsYXNzTGlzdC5yZW1vdmUoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlclJvb20udGV4dENvbnRlbnQuaW5jbHVkZXMoJzEnKSAmJiByb29tLnRleHRDb250ZW50LmluY2x1ZGVzKCcxJykpIHtcclxuICAgICAgICAgICAgICAgICAgICByb29tLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJSb29tLnRleHRDb250ZW50LmluY2x1ZGVzKCcyJykgJiYgcm9vbS50ZXh0Q29udGVudC5pbmNsdWRlcygnMicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9vbS5jbGFzc0xpc3QuYWRkKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyUm9vbS50ZXh0Q29udGVudC5pbmNsdWRlcygnMycpICYmIHJvb20udGV4dENvbnRlbnQuaW5jbHVkZXMoJzMnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb20uY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlclJvb20udGV4dENvbnRlbnQuaW5jbHVkZXMoJzQrJykgJiYgcm9vbS50ZXh0Q29udGVudC5pbmNsdWRlcygnNCsnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb20uY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlclJvb20udGV4dENvbnRlbnQuaW5jbHVkZXMoJzQnKSAmJiByb29tLnRleHRDb250ZW50LmluY2x1ZGVzKCc0JykgJiYgIXVzZXJSb29tLnRleHRDb250ZW50LmluY2x1ZGVzKCcrJykgJiYgIXJvb20udGV4dENvbnRlbnQuaW5jbHVkZXMoJysnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb20uY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJSZXBhaXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlclJlcGFpcicpO1xyXG4gICAgICAgICAgICBjaGVja2JveGVzUmVwYWlyLmZvckVhY2gocmVwYWlyID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcGFpci5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJSZXBhaXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Cx0LDQsdGD0YjQutC40L0nKSAmJiByZXBhaXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Cx0LDQsdGD0YjQutC40L0nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcGFpci5jbGFzc0xpc3QuYWRkKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyUmVwYWlyLnRleHRDb250ZW50LmluY2x1ZGVzKCfQmtC+0YHQvNC10YLQuNGH0LXRgdC60LjQuScpICYmIHJlcGFpci50ZXh0Q29udGVudC5pbmNsdWRlcygn0JrQvtGB0LzQtdGC0LjRh9C10YHQutC40LknKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcGFpci5jbGFzc0xpc3QuYWRkKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyUmVwYWlyLnRleHRDb250ZW50LmluY2x1ZGVzKCfQlNC40LfQsNC50L3QtdGA0YHQutC40LknKSAmJiByZXBhaXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9CU0LjQt9Cw0LnQvdC10YDRgdC60LjQuScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwYWlyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJSZXBhaXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Cd0LUg0LLQsNC20L3QvicpICYmIHJlcGFpci50ZXh0Q29udGVudC5pbmNsdWRlcygn0LLQsNC20L3QvicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwYWlyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyQ29saXZlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51c2VyQ29saXZlcicpO1xyXG4gICAgICAgICAgICBjaGVja2JveGVzQ29saXZlci5mb3JFYWNoKGNvbGl2ZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29saXZlci5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJDb2xpdmVyLnRleHRDb250ZW50LmluY2x1ZGVzKCfQodC+0LHQsNC60LAnKSAmJiBjb2xpdmVyLnRleHRDb250ZW50LmluY2x1ZGVzKCfQodC+0LHQsNC60LAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGl2ZXIuY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckNvbGl2ZXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Ca0L7RgicpICYmIGNvbGl2ZXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Ca0L7RgicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29saXZlci5jbGFzc0xpc3QuYWRkKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQ29saXZlci50ZXh0Q29udGVudC5pbmNsdWRlcygn0JTRgNGD0LPQuNC1JykgJiYgY29saXZlci50ZXh0Q29udGVudC5pbmNsdWRlcygn0JTRgNGD0LPQuNC1JykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xpdmVyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJDb2xpdmVyLnRleHRDb250ZW50LmluY2x1ZGVzKCfQndC1INCy0LDQttC90L4nKSAmJiBjb2xpdmVyLnRleHRDb250ZW50LmluY2x1ZGVzKCfQstCw0LbQvdC+JykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xpdmVyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sIDMwMClcclxuXHJcbn0iLCJpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbVNlbGVjdCcpKSB7XHJcbiAgICBjb25zdCB1c2VyQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51c2VyQXJlYScpO1xyXG4gICAgY29uc3QgY3VzdG9tU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbVNlbGVjdCcpO1xyXG4gICAgY29uc3Qgc2VsZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZWYtc2xpZGVfX3NlbGVjdC1jb250YWluZXInKTtcclxuICAgIGNvbnN0IHNlbGVjdE9wdGlvbnMgPSBzZWxlY3RDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnByZWYtc2xpZGVfX29wdGlvbicpO1xyXG4gICAgbGV0IHNhdmVkU3RyaW5nID0gY3VzdG9tU2VsZWN0LnRleHRDb250ZW50O1xyXG5cclxuICAgIGN1c3RvbVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZWN0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1oaWRkZW4nKTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfSlcclxuXHJcbiAgICB3aW5kb3cub25jbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC50YXJnZXQgIT0gc2VsZWN0Q29udGFpbmVyICYmICFldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcmVmLXNsaWRlX19vcHRpb24nKSAmJiAhZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJlZi1zbGlkZV9fc2VsZWN0JykpIHtcclxuICAgICAgICAgICAgc2VsZWN0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJqcy0taGlkZGVuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIHNlbGVjdE9wdGlvbnMuZm9yRWFjaCgob3B0aW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIG9wdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGluZGV4ICE9IDApIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdE9wdGlvbnNbMF0uY2xhc3NMaXN0LnJlbW92ZSgncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdwcmVmLXNsaWRlX19vcHRpb24tLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudC5pbmNsdWRlcyhgLCAke29wdGlvbi50ZXh0Q29udGVudC5zbGljZSgwLCA1KX1gKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQgPSBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQucmVwbGFjZShgLCAke29wdGlvbi50ZXh0Q29udGVudC5zbGljZSgwLCA1KX1gLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tU2VsZWN0LnRleHRDb250ZW50ID0gY3VzdG9tU2VsZWN0LnRleHRDb250ZW50LnJlcGxhY2UoYCR7b3B0aW9uLnRleHRDb250ZW50LnNsaWNlKDAsIDUpfWAsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudC50cmltKCkgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tU2VsZWN0LnRleHRDb250ZW50ID0gJ9CS0YHQtSDRgNCw0LnQvtC90YsnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RPcHRpb25zWzBdLmNsYXNzTGlzdC5hZGQoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghb3B0aW9uLmNsYXNzTGlzdC5jb250YWlucygncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5jbGFzc0xpc3QuYWRkKCdwcmVmLXNsaWRlX19vcHRpb24tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudCA9IGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudC5yZXBsYWNlKCfQktGB0LUg0YDQsNC50L7QvdGLJywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudCA9IGAke2N1c3RvbVNlbGVjdC50ZXh0Q29udGVudH0gJHtvcHRpb24udGV4dENvbnRlbnQuc2xpY2UoMCwgNSl9YFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQgPSBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQucmVwbGFjZSgn0JLRgdC1INGA0LDQudC+0L3RiycsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tU2VsZWN0LnRleHRDb250ZW50ID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudCA9IGAke29wdGlvbi50ZXh0Q29udGVudC5zbGljZSgwLCA1KX1gXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tU2VsZWN0LnRleHRDb250ZW50ID0gYCR7Y3VzdG9tU2VsZWN0LnRleHRDb250ZW50fSwgJHtvcHRpb24udGV4dENvbnRlbnQuc2xpY2UoMCwgNSl9YFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RPcHRpb25zLmZvckVhY2goKGlubmVyX29wdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlubmVyX29wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdwcmVmLXNsaWRlX19vcHRpb24tLWFjdGl2ZScpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5jbGFzc0xpc3QuYWRkKCdwcmVmLXNsaWRlX19vcHRpb24tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgY3VzdG9tU2VsZWN0LnRleHRDb250ZW50ID0gJ9CS0YHQtSDRgNCw0LnQvtC90YsnO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIGlmICh1c2VyQXJlYS50ZXh0Q29udGVudCAhPT0gJycpIHtcclxuICAgICAgICBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQgPSB1c2VyQXJlYS50ZXh0Q29udGVudDtcclxuICAgICAgICBzZWxlY3RPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcclxuICAgICAgICAgICAgaWYgKHVzZXJBcmVhLnRleHRDb250ZW50LmluY2x1ZGVzKCfQm9C10L0nKSAmJiBvcHRpb24udGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Cb0LXQvScpKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdE9wdGlvbnNbMF0uY2xhc3NMaXN0LnJlbW92ZSgncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQXJlYS50ZXh0Q29udGVudC5pbmNsdWRlcygn0J7QutGCJykgJiYgb3B0aW9uLnRleHRDb250ZW50LmluY2x1ZGVzKCfQntC60YInKSkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RPcHRpb25zWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFyZWEudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Ch0LLQtdGAJykgJiYgb3B0aW9uLnRleHRDb250ZW50LmluY2x1ZGVzKCfQodCy0LXRgCcpKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdE9wdGlvbnNbMF0uY2xhc3NMaXN0LnJlbW92ZSgncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQXJlYS50ZXh0Q29udGVudC5pbmNsdWRlcygn0J/RgNCw0LLQvicpICYmIG9wdGlvbi50ZXh0Q29udGVudC5pbmNsdWRlcygn0J/RgNCw0LLQvicpKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdE9wdGlvbnNbMF0uY2xhc3NMaXN0LnJlbW92ZSgncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQXJlYS50ZXh0Q29udGVudC5pbmNsdWRlcygn0JLRgdC1JykgJiYgb3B0aW9uLnRleHRDb250ZW50LmluY2x1ZGVzKCfQktGB0LUnKSkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RPcHRpb25zWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59IiwiaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyQnVkZ2V0SW5wdXQnKSkge1xyXG4gICAgY29uc3QgdXNlckJ1ZGdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51c2VyQnVkZ2V0Jyk7XHJcbiAgICBsZXQgdmFsdWUgPSA1MDAwMDtcclxuICAgIGlmICh1c2VyQnVkZ2V0LnRleHRDb250ZW50ICE9PSAnJykge1xyXG4gICAgICAgIHZhbHVlID0gcGFyc2VJbnQodXNlckJ1ZGdldC50ZXh0Q29udGVudCk7XHJcbiAgICAgICAgJChcIiN1c2VyQnVkZ2V0SW5wdXRcIikudmFsKHZhbHVlKTtcclxuICAgIH1cclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCIjdXNlckJ1ZGdldFwiKS5zbGlkZXIoe1xyXG4gICAgICAgICAgICByYW5nZTogXCJtaW5cIixcclxuICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICBtYXg6IDIwMDAwMCxcclxuICAgICAgICAgICAgc3RlcDogMTAwMCxcclxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxyXG4gICAgICAgICAgICBzbGlkZTogZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xyXG4gICAgICAgICAgICAgICAgJChcIiN1c2VyQnVkZ2V0SW5wdXRcIikudmFsKHVpLnZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYnVkZ2V0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlckJ1ZGdldElucHV0Jyk7XHJcblxyXG4gICAgYnVkZ2V0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWVJbnB1dCA9IGJ1ZGdldElucHV0LnZhbHVlO1xyXG4gICAgICAgICQoXCIjdXNlckJ1ZGdldFwiKS5zbGlkZXIoXCJ2YWx1ZVwiLCB2YWx1ZUlucHV0KTtcclxuICAgIH0pXHJcbn0iLCJpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN1Ym1pdEZvcm0nKSkge1xyXG4gICAgY29uc3Qgc3VibWl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXRGb3JtJyk7XHJcbiAgICBsZXQgcm9vbXNBbW91bnQgPSAnJztcclxuICAgIGxldCBidWRnZXQgPSAnJztcclxuICAgIGxldCBhcmVhU2VhcmNoID0gJyc7XHJcbiAgICBsZXQgcmVwYWlyUHJlZnMgPSAnJztcclxuICAgIGxldCBjb2xpdmVyUHJlZnMgPSAnJztcclxuXHJcbiAgICBsZXQgcHJlZnNPYmplY3QgPSB7XHJcbiAgICAgICAgcm9vbXNBbW91bnQ6ICcnLFxyXG4gICAgICAgIGJ1ZGdldDogJycsXHJcbiAgICAgICAgYXJlYVNlYXJjaDogJycsXHJcbiAgICAgICAgcmVwYWlyUHJlZnM6ICcnLFxyXG4gICAgICAgIGNvbGl2ZXJQcmVmczogJycsXHJcbiAgICB9XHJcblxyXG4gICAgc3VibWl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBzdWJtaXRGb3JtLmNsYXNzTGlzdC5hZGQoJ2pzLS1pbmFjdGl2ZScpXHJcbiAgICAgICAgZ2V0Um9vbXNBbW91bnQoKTtcclxuICAgICAgICBnZXRSZXBhaXJQcmVmcygpO1xyXG4gICAgICAgIGdldENvbGl2ZXJQcmVmcygpO1xyXG4gICAgICAgIGJ1ZGdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyQnVkZ2V0SW5wdXQnKS52YWx1ZTtcclxuICAgICAgICBhcmVhU2VhcmNoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbVNlbGVjdCcpLnRleHRDb250ZW50O1xyXG4gICAgICAgIGNvbnN0IGlucHV0Um9vbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vbXNBbW91bnQnKTtcclxuICAgICAgICBjb25zdCBpbnB1dEJ1ZGdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidWRnZXRBbW91bnQnKTtcclxuICAgICAgICBjb25zdCBpbnB1dEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJlYVNlYXJjaCcpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0UmVwYWlycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBhaXJQcmVmcycpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0Q29saXZlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xpdmVyUHJlZnMnKTtcclxuICAgICAgICBpbnB1dFJvb21zLnZhbHVlID0gcm9vbXNBbW91bnQ7XHJcbiAgICAgICAgaW5wdXRCdWRnZXQudmFsdWUgPSBidWRnZXQ7XHJcbiAgICAgICAgaW5wdXRBcmVhLnZhbHVlID0gYXJlYVNlYXJjaDtcclxuICAgICAgICBpbnB1dFJlcGFpcnMudmFsdWUgPSByZXBhaXJQcmVmcztcclxuICAgICAgICBpbnB1dENvbGl2ZXIudmFsdWUgPSBjb2xpdmVyUHJlZnM7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZWZzRm9ybScpLnN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgICBmdW5jdGlvbiBnZXRSb29tc0Ftb3VudCgpIHtcclxuICAgICAgICBjb25zdCByb29tc0NoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucm9vbUNoZWNrYm94Jyk7XHJcbiAgICAgICAgcm9vbXNDaGVja2JveGVzLmZvckVhY2goYm94ID0+IHtcclxuICAgICAgICAgICAgaWYgKGJveC5jbGFzc0xpc3QuY29udGFpbnMoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGJveC50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgICAgIHJvb21zQW1vdW50ICs9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcm9vbXNBbW91bnQgKz0gJywgJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICByb29tc0Ftb3VudCA9IHJvb21zQW1vdW50LnRyaW0oKTtcclxuICAgICAgICByb29tc0Ftb3VudCA9IHJvb21zQW1vdW50LnNsaWNlKDAsIHJvb21zQW1vdW50Lmxlbmd0aCAtIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJlcGFpclByZWZzKCkge1xyXG4gICAgICAgIGNvbnN0IHJlcGFpcnNDaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlcGFpckNoZWNrYm94Jyk7XHJcbiAgICAgICAgcmVwYWlyc0NoZWNrYm94ZXMuZm9yRWFjaChib3ggPT4ge1xyXG4gICAgICAgICAgICBpZiAoYm94LmNsYXNzTGlzdC5jb250YWlucygnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScpO1xyXG4gICAgICAgICAgICAgICAgcmVwYWlyUHJlZnMgKz0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICByZXBhaXJQcmVmcyArPSAnLCAnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIHJlcGFpclByZWZzID0gcmVwYWlyUHJlZnMudHJpbSgpO1xyXG4gICAgICAgIHJlcGFpclByZWZzID0gcmVwYWlyUHJlZnMuc2xpY2UoMCwgcmVwYWlyUHJlZnMubGVuZ3RoIC0gMSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q29saXZlclByZWZzKCkge1xyXG4gICAgICAgIGNvbnN0IGNvbGl2ZXJDaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbGl2ZXJDaGVja2JveCcpO1xyXG4gICAgICAgIGNvbGl2ZXJDaGVja2JveGVzLmZvckVhY2goYm94ID0+IHtcclxuICAgICAgICAgICAgaWYgKGJveC5jbGFzc0xpc3QuY29udGFpbnMoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGJveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKTtcclxuICAgICAgICAgICAgICAgIGNvbGl2ZXJQcmVmcyArPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGNvbGl2ZXJQcmVmcyArPSAnLCAnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbGl2ZXJQcmVmcyA9IGNvbGl2ZXJQcmVmcy50cmltKCk7XHJcbiAgICAgICAgY29saXZlclByZWZzID0gY29saXZlclByZWZzLnNsaWNlKDAsIGNvbGl2ZXJQcmVmcy5sZW5ndGggLSAxKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8vICQoZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgJChcIiNwcmVmc0Zvcm1cIikub24oXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGUpIHtcclxuLy8gICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4vLyAgICAgICAgICQuYWpheCh7XHJcbi8vICAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxyXG4vLyAgICAgICAgICAgICB1cmw6ICc8P3BocCBhZG1pbl91cmwoICdhZG1pbi0gYWpheC5waHAnICk/PicsXHJcbi8vICAgICAgICAgICAgIGRhdGE6IHtcclxuLy8gICAgICAgICAgICAgYWN0aW9uOiBcInVwZGF0ZV9wcmVmc1wiLFxyXG4vLyAgICAgICAgICAgICByb29tc0Ftb3VudDogcHJlZnNPYmplY3Qucm9vbXNBbW91bnQsXHJcbi8vICAgICAgICAgICAgIGJ1ZGdldDogcHJlZnNPYmplY3QuYnVkZ2V0LFxyXG4vLyAgICAgICAgICAgICBhcmVhU2VhcmNoOiBwcmVmc09iamVjdC5hcmVhU2VhcmNoLFxyXG4vLyAgICAgICAgICAgICByZXBhaXJQcmVmczogcHJlZnNPYmplY3QucmVwYWlyUHJlZnMsXHJcbi8vICAgICAgICAgICAgIGNvbGl2ZXJQcmVmczogcHJlZnNPYmplY3QuY29saXZlclByZWZzLFxyXG4vLyAgICAgICAgIH0sXHJcbi8vICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4vLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UsICdyZXNwb25zZScpO1xyXG4vLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3MnLCAnc3RhdHVzJyk7XHJcbi8vICAgICAgICAgICAgIH0sXHJcbi8vICAgICAgICAgfSk7XHJcbi8vIH0pO1xyXG4vLyB9KTtcclxuXHJcblxyXG5cclxuXHJcbiIsIi8vIFN3aXBlciBTZWN0aW9uXHJcblxyXG5jb25zdCBzbGlkZXJDb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN3aXBlci1hZHQnKTtcclxuXHJcbnNsaWRlckNvbnRhaW5lcnMuZm9yRWFjaCgoc3dpcGVyLCBpbmRleCkgPT4ge1xyXG4gICAgY29uc3Qgc3dpcGVyUGFnaW5hdGlvbiA9IHN3aXBlci5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXBhZ2luYXRpb24nKTtcclxuICAgIHN3aXBlci5jbGFzc0xpc3QuYWRkKGBzd2lwZXItYWR0LS0ke2luZGV4fWApO1xyXG4gICAgc3dpcGVyUGFnaW5hdGlvbi5jbGFzc0xpc3QuYWRkKGBzd2lwZXItcGFnaW5hdGlvbi0tJHtpbmRleH1gKTtcclxuICAgIGNvbnN0IGFkdFN3aXBlciA9IG5ldyBTd2lwZXIoYC5zd2lwZXItYWR0LS0ke2luZGV4fWAsIHtcclxuICAgICAgICBzcGVlZDogNDAwLFxyXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgIGVmZmVjdDogJ2NhcmRzJyxcclxuICAgICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgZWw6IGAuc3dpcGVyLXBhZ2luYXRpb24tLSR7aW5kZXh9YCxcclxuICAgICAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG59KTsiLCJcclxuY29uc3QgYWxsTmV4dEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJlZi1zbGlkZV9fYnV0dG9uJyk7XHJcbmNvbnN0IGFsbFNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmVmLXNsaWRlJyk7XHJcbmFsbE5leHRCdXR0b25zLmZvckVhY2goKGJ1dHRvbiwgaW5kZXgpID0+IHtcclxuICAgIGlmIChpbmRleCAhPT0gMikge1xyXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgYWxsU2xpZGVzW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdqcy0taGlkZGVuJyk7XHJcbiAgICAgICAgICAgIGFsbFNsaWRlc1tpbmRleCArIDFdLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1oaWRkZW4nKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59KVxyXG4iLCJmdW5jdGlvbiBhY3RpdmF0ZUZvcm1zKCkge1xyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWduaW4tZm9ybScpKSB7XHJcbiAgICAgICAgY29uc3Qgc2lnbmluRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWduaW4tZm9ybScpO1xyXG4gICAgICAgIGNvbnN0IHNpZ251cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lnbnVwLWZvcm0nKTtcclxuICAgICAgICBjb25zdCBjYXB0aW9uSW4gPSBzaWduaW5Gb3JtLnF1ZXJ5U2VsZWN0b3IoJy5jYXB0aW9uJyk7XHJcbiAgICAgICAgY29uc3QgY2FwdGlvblVwID0gc2lnbnVwRm9ybS5xdWVyeVNlbGVjdG9yKCcuY2FwdGlvbicpO1xyXG4gICAgICAgIGNhcHRpb25Jbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgc2lnbmluRm9ybS5jbGFzc0xpc3QuYWRkKCdqcy0taGlkZGVuJyk7XHJcbiAgICAgICAgICAgIHNpZ251cEZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnanMtLWhpZGRlbicpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgY2FwdGlvblVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzaWduaW5Gb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1oaWRkZW4nKTtcclxuICAgICAgICAgICAgc2lnbnVwRm9ybS5jbGFzc0xpc3QuYWRkKCdqcy0taGlkZGVuJyk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cclxuc2V0VGltZW91dChhY3RpdmF0ZUZvcm1zLCAzMDApIiwiY29uc3QgdGltZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lc3NhZ2UtdGltZScpO1xyXG5jb25zdCBmb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXQtZm9ybScpO1xyXG5mdW5jdGlvbiBtb2RpZnlUaW1lKCkge1xyXG4gICAgdGltZXJzLmZvckVhY2godGltZXIgPT4ge1xyXG4gICAgICAgIGxldCB0aW1lclZhbHVlID0gdGltZXIudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdGltZXJWYWx1ZSA9IHRpbWVyVmFsdWUuc2xpY2UoMTEsIDE3KTtcclxuICAgICAgICB0aW1lci50ZXh0Q29udGVudCA9IHRpbWVyVmFsdWU7XHJcbiAgICB9KVxyXG59XHJcblxyXG5tb2RpZnlUaW1lKCk7XHJcblxyXG5cclxuXHJcbiIsImlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9nZ2VkJykpIHtcclxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9nZ2VkJykgPT0gJ3RydWUnKSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY2NvdW50Jyk7XHJcbiAgICAgICAgYWNjb3VudC5jbGFzc0xpc3QuYWRkKCdhY2NvdW50LS1sb2dnZWQnKTtcclxuICAgIH1cclxufSIsImlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudU9wZW5lcicpKSB7XHJcbiAgICBjb25zdCBvcGVuZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudU9wZW5lcicpO1xyXG4gICAgb3BlbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIG9wZW5lci5jbGFzc0xpc3QuYWRkKCdvcGVuZXItLWFjdGl2ZScpXHJcbiAgICB9KVxyXG4gICAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9IG9wZW5lciAmJiAhZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2hlY2tTcGFuJykpIHtcclxuICAgICAgICAgICAgb3BlbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuZXItLWFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59IiwiZnVuY3Rpb24gYWN0aXZhdGVMb2dvdXQoKSB7XHJcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtaGVhZGVyJykpIHtcclxuICAgICAgICBjb25zdCBtZW51SGVhYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LWhlYWRlcicpO1xyXG4gICAgICAgIGNvbnN0IGxvZ291dExpbmsgPSBtZW51SGVhYWRlci5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbiAgICAgICAgY29uc3QgbG9nb3V0TGlua0luTmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ291dExpbmsnKTtcclxuICAgICAgICBsb2dvdXRMaW5rSW5OYXYuaHJlZiA9IGxvZ291dExpbmsuaHJlZjtcclxuXHJcbiAgICAgICAgbG9nb3V0TGlua0luTmF2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvZ2dlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9nZ2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY2NvdW50Jyk7XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjY291bnQtLWxvZ2dlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cclxuc2V0VGltZW91dChhY3RpdmF0ZUxvZ291dCwgMzAwKSIsImNvbnN0IHBhZ2VMb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG5jb25zdCBwcm9wcyA9IFsn0JLQsNGIINC/0YDQvtGE0LjQu9GMJywgJ9CS0LDRiNC4INGB0L7QvtCx0YnQtdC90LjRjyddO1xyXG5cclxuaWYgKHBhZ2VMb2NhdGlvbi5pbmNsdWRlcygncHJvZmlsZScpIHx8IHBhZ2VMb2NhdGlvbi5pbmNsdWRlcygnc3Vic2NyaXB0aW9uJykpIHtcclxuICAgIGNvbnN0IGFsbE5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2ZpbGUtbmF2aWdhdGlvbl9fbGluaycpO1xyXG4gICAgY29uc3Qgc2VjdGlvbkhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdQcm9maWxlSGVhZGVyJyk7XHJcbiAgICBjb25zdCBhdmF0YXJGcmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5say1zaWRlYmFyJylcclxuICAgIGFsbE5hdkxpbmtzLmZvckVhY2goKGxpbmssIGluZGV4KSA9PiB7XHJcbiAgICAgICAgaWYgKGluZGV4ICE9PSA0KSB7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmhyZWYuaW5jbHVkZXMoJ3RhYj1jaGF0JylcclxuICAgICAgICAgICAgICAgICYmIHBhZ2VMb2NhdGlvbi5pbmNsdWRlcygndGFiPWNoYXQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGluay5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLW5hdmlnYXRpb25fX2xpbmstLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkhlYWRlci50ZXh0Q29udGVudCA9IHByb3BzWzFdO1xyXG4gICAgICAgICAgICAgICAgYXZhdGFyRnJhbWUuY2xhc3NMaXN0LmFkZCgnanMtLWhpZGRlbicpXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGluay5ocmVmLmluY2x1ZGVzKCd1c2VyJylcclxuICAgICAgICAgICAgICAgICYmIHBhZ2VMb2NhdGlvbi5pbmNsdWRlcygndXNlcicpICYmICFwYWdlTG9jYXRpb24uaW5jbHVkZXMoJ2NoYXQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGluay5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLW5hdmlnYXRpb25fX2xpbmstLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkhlYWRlci50ZXh0Q29udGVudCA9IHByb3BzWzBdO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmsuaHJlZi5pbmNsdWRlcygnc3Vic2NyaXB0aW9uJylcclxuICAgICAgICAgICAgICAgICYmIHBhZ2VMb2NhdGlvbi5pbmNsdWRlcygnc3Vic2NyaXB0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIGxpbmsuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1uYXZpZ2F0aW9uX19saW5rLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn0iXX0=
