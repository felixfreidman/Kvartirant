"use strict";var userArea,customSelect,selectContainer,selectOptions,savedString,userBudget,value,budgetInput,submitForm,_roomsAmount,budget,areaSearch,_repairPrefs,_coliverPrefs,prefsObject,checkboxesRepair=document.querySelectorAll(".repairCheckbox"),resetRepair=document.querySelector(".resetCheckboxRepair"),checkboxesColiver=document.querySelectorAll(".coliverCheckbox"),resetColiver=document.querySelector(".resetCheckboxColiver"),checkboxesRoom=document.querySelectorAll(".roomCheckbox"),resetRoom=document.querySelector(".resetCheckboxRoom");function resetCheckboxRepair(){var t=0;checkboxesRepair.forEach(function(e){e.classList.contains("custom-checkbox--active")&&t++,1<t&&resetRepair.classList.remove("custom-checkbox--active"),0==t&&resetRepair.classList.add("custom-checkbox--active")})}function resetCheckboxColiver(){var t=0;checkboxesColiver.forEach(function(e){e.classList.contains("custom-checkbox--active")&&t++,1<t&&resetColiver.classList.remove("custom-checkbox--active"),0==t&&resetColiver.classList.add("custom-checkbox--active")})}function resetCheckboxRoom(){var t=0;checkboxesRoom.forEach(function(e){e.classList.contains("custom-checkbox--active")&&t++}),0==t&&resetRoom.classList.add("custom-checkbox--active")}function getRoomsAmount(){document.querySelectorAll(".roomCheckbox").forEach(function(e){e.classList.contains("custom-checkbox--active")&&(e=e.textContent,roomsAmount=roomsAmount+e+", ")}),roomsAmount=(roomsAmount=roomsAmount.trim()).slice(0,roomsAmount.length-1)}function getRepairPrefs(){document.querySelectorAll(".repairCheckbox").forEach(function(e){e.classList.contains("custom-checkbox--active")&&(e=e.getAttribute("data-value"),repairPrefs=repairPrefs+e+", ")}),repairPrefs=(repairPrefs=repairPrefs.trim()).slice(0,repairPrefs.length-1)}function getColiverPrefs(){document.querySelectorAll(".coliverCheckbox").forEach(function(e){e.classList.contains("custom-checkbox--active")&&(e=e.getAttribute("data-value"),coliverPrefs=coliverPrefs+e+", ")}),coliverPrefs=(coliverPrefs=coliverPrefs.trim()).slice(0,coliverPrefs.length-1)}checkboxesRepair.forEach(function(e){e.addEventListener("click",function(){e.classList.contains("resetCheckboxRepair")?e.classList.contains("resetCheckboxRepair")&&checkboxesRepair.forEach(function(e){e.classList.remove("custom-checkbox--active"),resetRepair.classList.add("custom-checkbox--active")}):(e.classList.toggle("custom-checkbox--active"),setTimeout(resetCheckboxRepair,100))})}),checkboxesColiver.forEach(function(e){e.addEventListener("click",function(){e.classList.contains("resetCheckboxColiver")?e.classList.contains("resetCheckboxColiver")&&checkboxesColiver.forEach(function(e){e.classList.remove("custom-checkbox--active"),resetColiver.classList.add("custom-checkbox--active")}):(e.classList.toggle("custom-checkbox--active"),setTimeout(resetCheckboxColiver,100))})}),checkboxesRoom.forEach(function(e){e.addEventListener("click",function(){e.classList.toggle("custom-checkbox--active"),setTimeout(resetCheckboxRoom,100)})}),window.location.href.includes("prefs")&&setTimeout(function(){var t=document.querySelector(".userRoom"),c=(checkboxesRoom.forEach(function(e){e.classList.remove("custom-checkbox--active"),(t.textContent.includes("1")&&e.textContent.includes("1")||t.textContent.includes("2")&&e.textContent.includes("2")||t.textContent.includes("3")&&e.textContent.includes("3")||t.textContent.includes("4+")&&e.textContent.includes("4+")||t.textContent.includes("4")&&e.textContent.includes("4")&&!t.textContent.includes("+")&&!e.textContent.includes("+"))&&e.classList.add("custom-checkbox--active")}),document.querySelector(".userRepair")),o=(checkboxesRepair.forEach(function(e){e.classList.remove("custom-checkbox--active"),(c.textContent.includes("бабушкин")&&e.textContent.includes("бабушкин")||c.textContent.includes("Косметический")&&e.textContent.includes("Косметический")||c.textContent.includes("Дизайнерский")&&e.textContent.includes("Дизайнерский")||c.textContent.includes("Не важно")&&e.textContent.includes("важно"))&&e.classList.add("custom-checkbox--active")}),document.querySelector(".userColiver"));checkboxesColiver.forEach(function(e){e.classList.remove("custom-checkbox--active"),(o.textContent.includes("Собака")&&e.textContent.includes("Собака")||o.textContent.includes("Кот")&&e.textContent.includes("Кот")||o.textContent.includes("Другие")&&e.textContent.includes("Другие")||o.textContent.includes("Не важно")&&e.textContent.includes("важно"))&&e.classList.add("custom-checkbox--active")})},300),document.getElementById("customSelect")&&(userArea=document.querySelector(".userArea"),customSelect=document.getElementById("customSelect"),selectContainer=document.querySelector(".pref-slide__select-container"),selectOptions=selectContainer.querySelectorAll(".pref-slide__option"),savedString=customSelect.textContent,customSelect.addEventListener("click",function(){setTimeout(function(){selectContainer.classList.remove("js--hidden")},100)}),window.onclick=function(e){e.target==selectContainer||e.target.classList.contains("pref-slide__option")||e.target.classList.contains("pref-slide__select")||selectContainer.classList.add("js--hidden")},selectOptions.forEach(function(e,t){e.addEventListener("click",function(){0!=t?(selectOptions[0].classList.remove("pref-slide__option--active"),e.classList.contains("pref-slide__option--active")?(e.classList.remove("pref-slide__option--active"),customSelect.textContent.includes(", ".concat(e.textContent.slice(0,5)))?customSelect.textContent=customSelect.textContent.replace(", ".concat(e.textContent.slice(0,5)),""):customSelect.textContent=customSelect.textContent.replace("".concat(e.textContent.slice(0,5)),""),""==customSelect.textContent.trim()&&(customSelect.textContent="Все районы",selectOptions[0].classList.add("pref-slide__option--active"))):e.classList.contains("pref-slide__option--active")?(e.classList.add("pref-slide__option--active"),customSelect.textContent=customSelect.textContent.replace("Все районы",""),""==customSelect.textContent?customSelect.textContent="".concat(e.textContent.slice(0,5)):customSelect.textContent="".concat(customSelect.textContent,", ").concat(e.textContent.slice(0,5))):(e.classList.add("pref-slide__option--active"),customSelect.textContent=customSelect.textContent.replace("Все районы",""),customSelect.textContent="".concat(customSelect.textContent," ").concat(e.textContent.slice(0,5)))):(selectOptions.forEach(function(e){e.classList.remove("pref-slide__option--active")}),e.classList.add("pref-slide__option--active"),customSelect.textContent="Все районы")})}),""!==userArea.textContent)&&(customSelect.textContent=userArea.textContent,selectOptions.forEach(function(e){(userArea.textContent.includes("Лен")&&e.textContent.includes("Лен")||userArea.textContent.includes("Окт")&&e.textContent.includes("Окт")||userArea.textContent.includes("Свер")&&e.textContent.includes("Свер")||userArea.textContent.includes("Право")&&e.textContent.includes("Право")||userArea.textContent.includes("Все")&&e.textContent.includes("Все"))&&(e.classList.add("pref-slide__option--active"),selectOptions[0].classList.remove("pref-slide__option--active"))})),document.getElementById("userBudgetInput")&&(userBudget=document.querySelector(".userBudget"),value=5e4,""!==userBudget&&(value=parseInt(userBudget.textContent),$("#userBudgetInput").val(value)),$(function(){$("#userBudget").slider({range:"min",min:0,max:2e5,step:1e3,value:value,slide:function(e,t){$("#userBudgetInput").val(t.value)}})}),(budgetInput=document.getElementById("userBudgetInput")).addEventListener("input",function(){var e=budgetInput.value;$("#userBudget").slider("value",e)})),document.querySelector(".submitForm")&&(submitForm=document.querySelector(".submitForm"),prefsObject={roomsAmount:_coliverPrefs=_repairPrefs=areaSearch=budget=_roomsAmount="",budget:"",areaSearch:"",repairPrefs:"",coliverPrefs:""},submitForm.addEventListener("click",function(){submitForm.classList.add("js--inactive"),getRoomsAmount(),getRepairPrefs(),getColiverPrefs(),budget=document.getElementById("userBudgetInput").value,areaSearch=document.getElementById("customSelect").textContent;var e=document.getElementById("roomsAmount"),t=document.getElementById("budgetAmount"),c=document.getElementById("areaSearch"),o=document.getElementById("repairPrefs"),n=document.getElementById("coliverPrefs");e.value=_roomsAmount,t.value=budget,c.value=areaSearch,o.value=_repairPrefs,n.value=_coliverPrefs,document.getElementById("prefsForm").submit()}));var sliderContainers=document.querySelectorAll(".swiper-adt"),allNextButtons=(sliderContainers.forEach(function(e,t){var c=e.querySelector(".swiper-pagination");e.classList.add("swiper-adt--".concat(t)),c.classList.add("swiper-pagination--".concat(t)),new Swiper(".swiper-adt--".concat(t),{speed:400,spaceBetween:0,slidesPerView:1,effect:"cards",direction:"horizontal",loop:!0,pagination:{el:".swiper-pagination--".concat(t),clickable:!0}})}),document.querySelectorAll(".pref-slide__button")),allSlides=document.querySelectorAll(".pref-slide");function activateForms(){var e,t,c,o;document.querySelector(".signin-form")&&(e=document.querySelector(".signin-form"),t=document.querySelector(".signup-form"),c=e.querySelector(".caption"),o=t.querySelector(".caption"),c.addEventListener("click",function(){e.classList.add("js--hidden"),t.classList.remove("js--hidden")}),o.addEventListener("click",function(){e.classList.remove("js--hidden"),t.classList.add("js--hidden")}))}allNextButtons.forEach(function(e,t){2!==t&&e.addEventListener("click",function(){allSlides[t].classList.add("js--hidden"),allSlides[t+1].classList.remove("js--hidden")})}),setTimeout(activateForms,300);var account,opener,timers=document.querySelectorAll(".message-time"),formContainer=document.querySelectorAll(".chat-form");function modifyTime(){timers.forEach(function(e){var t=(t=e.textContent).slice(11,17);e.textContent=t})}function activateLogout(){var e,t;document.getElementById("menu-header")&&(e=document.getElementById("menu-header").querySelector("a"),(t=document.getElementById("logoutLink")).href=e.href,t.addEventListener("click",function(){localStorage.getItem("logged")&&(localStorage.setItem("logged",!1),document.querySelector(".account").classList.remove("account--logged"))}))}modifyTime(),setTimeout(activateLogout,300),localStorage.getItem("logged")&&"true"==localStorage.getItem("logged")&&(account=document.querySelector(".account")).classList.add("account--logged"),document.getElementById("menuOpener")&&((opener=document.getElementById("menuOpener")).addEventListener("click",function(){opener.classList.add("opener--active")}),window.onclick=function(e){e.target==opener||e.target.classList.contains("checkSpan")||opener.classList.remove("opener--active")});var allNavLinks,sectionHeader,avatarFrame,pageLocation=window.location.href,props=["Ваш профиль","Ваши сообщения"];(pageLocation.includes("profile")||pageLocation.includes("subscription"))&&(allNavLinks=document.querySelectorAll(".profile-navigation__link"),sectionHeader=document.getElementById("ProfileHeader"),avatarFrame=document.querySelector(".lk-sidebar"),allNavLinks.forEach(function(e,t){4!==t&&(e.href.includes("tab=chat")&&pageLocation.includes("tab=chat")?(e.classList.add("profile-navigation__link--active"),sectionHeader.textContent=props[1],avatarFrame.classList.add("js--hidden")):e.href.includes("user")&&pageLocation.includes("user")&&!pageLocation.includes("chat")?(e.classList.add("profile-navigation__link--active"),sectionHeader.textContent=props[0]):e.href.includes("subscription")&&pageLocation.includes("subscription")&&e.classList.add("profile-navigation__link--active"))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm1fQ3VzdG9tQ2hlY2tib3guanMiLCJmb3JtX0N1c3RvbVNlbGVjdC5qcyIsImZvcm1fU2xpZGVyLmpzIiwiZm9ybV9VcGRhdGVQcmVmcy5qcyIsInBsdWdpbl9Td2lwZXJDb25maWcuanMiLCJwcmVmc19UZXN0TG9naWMuanMiLCJwcm9maWxlX0F1dGhvcml6YXRpb24uanMiLCJwcm9maWxlX0NoYXRTZXR0aW5ncy5qcyIsInByb2ZpbGVfTG9nU3RhdHVzLmpzIiwicHJvZmlsZV9Nb2JpbGVOYXZpZ2F0aW9uLmpzIiwicHJvZmlsZV9Mb2dvdXRCdXR0b24uanMiLCJwcm9maWxlX05hdmlnYXRpb24uanMiXSwibmFtZXMiOlsidXNlckFyZWEiLCJjdXN0b21TZWxlY3QiLCJzZWxlY3RDb250YWluZXIiLCJzZWxlY3RPcHRpb25zIiwic2F2ZWRTdHJpbmciLCJ1c2VyQnVkZ2V0IiwidmFsdWUiLCJidWRnZXRJbnB1dCIsInN1Ym1pdEZvcm0iLCJyb29tc0Ftb3VudCIsImJ1ZGdldCIsImFyZWFTZWFyY2giLCJyZXBhaXJQcmVmcyIsImNvbGl2ZXJQcmVmcyIsInByZWZzT2JqZWN0IiwiY2hlY2tib3hlc1JlcGFpciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInJlc2V0UmVwYWlyIiwicXVlcnlTZWxlY3RvciIsImNoZWNrYm94ZXNDb2xpdmVyIiwicmVzZXRDb2xpdmVyIiwiY2hlY2tib3hlc1Jvb20iLCJyZXNldFJvb20iLCJyZXNldENoZWNrYm94UmVwYWlyIiwiY29udHJvbFN1bSIsImZvckVhY2giLCJyb29tIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJhZGQiLCJyZXNldENoZWNrYm94Q29saXZlciIsInJlc2V0Q2hlY2tib3hSb29tIiwiZ2V0Um9vbXNBbW91bnQiLCJib3giLCJ0ZXh0Q29udGVudCIsInRyaW0iLCJzbGljZSIsImxlbmd0aCIsImdldFJlcGFpclByZWZzIiwiZ2V0QXR0cmlidXRlIiwiZ2V0Q29saXZlclByZWZzIiwicmVwYWlyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImlubmVyX2NoZWNrYm94IiwidG9nZ2xlIiwic2V0VGltZW91dCIsImNvbGl2ZXIiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJpbmNsdWRlcyIsInVzZXJSb29tIiwidXNlclJlcGFpciIsInVzZXJDb2xpdmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJvbmNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJvcHRpb24iLCJpbmRleCIsImNvbmNhdCIsInJlcGxhY2UiLCJpbm5lcl9vcHRpb24iLCJwYXJzZUludCIsIiQiLCJ2YWwiLCJzbGlkZXIiLCJyYW5nZSIsIm1pbiIsIm1heCIsInN0ZXAiLCJzbGlkZSIsInVpIiwidmFsdWVJbnB1dCIsImlucHV0Um9vbXMiLCJpbnB1dEJ1ZGdldCIsImlucHV0QXJlYSIsImlucHV0UmVwYWlycyIsImlucHV0Q29saXZlciIsInN1Ym1pdCIsInNsaWRlckNvbnRhaW5lcnMiLCJhbGxOZXh0QnV0dG9ucyIsInN3aXBlciIsInN3aXBlclBhZ2luYXRpb24iLCJTd2lwZXIiLCJzcGVlZCIsInNwYWNlQmV0d2VlbiIsInNsaWRlc1BlclZpZXciLCJlZmZlY3QiLCJkaXJlY3Rpb24iLCJsb29wIiwicGFnaW5hdGlvbiIsImVsIiwiY2xpY2thYmxlIiwiYWxsU2xpZGVzIiwiYWN0aXZhdGVGb3JtcyIsInNpZ25pbkZvcm0iLCJzaWdudXBGb3JtIiwiY2FwdGlvbkluIiwiY2FwdGlvblVwIiwiYnV0dG9uIiwiYWNjb3VudCIsIm9wZW5lciIsInRpbWVycyIsImZvcm1Db250YWluZXIiLCJtb2RpZnlUaW1lIiwidGltZXIiLCJ0aW1lclZhbHVlIiwiYWN0aXZhdGVMb2dvdXQiLCJsb2dvdXRMaW5rIiwibG9nb3V0TGlua0luTmF2IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJhbGxOYXZMaW5rcyIsInNlY3Rpb25IZWFkZXIiLCJhdmF0YXJGcmFtZSIsInBhZ2VMb2NhdGlvbiIsInBy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LENBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNoZWNrYm94ZXNSZXBhaXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVwYWlyQ2hlY2tib3gnKTtcclxuY29uc3QgcmVzZXRSZXBhaXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVzZXRDaGVja2JveFJlcGFpcicpO1xyXG5jb25zdCBjaGVja2JveGVzQ29saXZlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2xpdmVyQ2hlY2tib3gnKTtcclxuY29uc3QgcmVzZXRDb2xpdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlc2V0Q2hlY2tib3hDb2xpdmVyJyk7XHJcbmNvbnN0IGNoZWNrYm94ZXNSb29tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJvb21DaGVja2JveCcpO1xyXG5jb25zdCByZXNldFJvb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVzZXRDaGVja2JveFJvb20nKTtcclxuXHJcblxyXG5cclxuY2hlY2tib3hlc1JlcGFpci5mb3JFYWNoKHJlcGFpciA9PiB7XHJcbiAgICByZXBhaXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXBhaXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZXNldENoZWNrYm94UmVwYWlyJykpIHtcclxuICAgICAgICAgICAgcmVwYWlyLmNsYXNzTGlzdC50b2dnbGUoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQocmVzZXRDaGVja2JveFJlcGFpciwgMTAwKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlcGFpci5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0Q2hlY2tib3hSZXBhaXInKSkge1xyXG4gICAgICAgICAgICBjaGVja2JveGVzUmVwYWlyLmZvckVhY2goaW5uZXJfY2hlY2tib3ggPT4ge1xyXG4gICAgICAgICAgICAgICAgaW5uZXJfY2hlY2tib3guY2xhc3NMaXN0LnJlbW92ZSgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHJlc2V0UmVwYWlyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufSlcclxuXHJcbmNoZWNrYm94ZXNDb2xpdmVyLmZvckVhY2goY29saXZlciA9PiB7XHJcbiAgICBjb2xpdmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGlmICghY29saXZlci5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0Q2hlY2tib3hDb2xpdmVyJykpIHtcclxuICAgICAgICAgICAgY29saXZlci5jbGFzc0xpc3QudG9nZ2xlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJlc2V0Q2hlY2tib3hDb2xpdmVyLCAxMDApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29saXZlci5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0Q2hlY2tib3hDb2xpdmVyJykpIHtcclxuICAgICAgICAgICAgY2hlY2tib3hlc0NvbGl2ZXIuZm9yRWFjaChpbm5lcl9jaGVja2JveCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpbm5lcl9jaGVja2JveC5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgcmVzZXRDb2xpdmVyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufSlcclxuXHJcbmNoZWNrYm94ZXNSb29tLmZvckVhY2gocm9vbSA9PiB7XHJcbiAgICByb29tLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIHJvb20uY2xhc3NMaXN0LnRvZ2dsZSgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KHJlc2V0Q2hlY2tib3hSb29tLCAxMDApO1xyXG4gICAgfSlcclxufSlcclxuXHJcblxyXG5mdW5jdGlvbiByZXNldENoZWNrYm94UmVwYWlyKCkge1xyXG4gICAgbGV0IGNvbnRyb2xTdW0gPSAwO1xyXG4gICAgY2hlY2tib3hlc1JlcGFpci5mb3JFYWNoKHJvb20gPT4ge1xyXG4gICAgICAgIGlmIChyb29tLmNsYXNzTGlzdC5jb250YWlucygnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICBjb250cm9sU3VtKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb250cm9sU3VtID4gMSkge1xyXG4gICAgICAgICAgICByZXNldFJlcGFpci5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRyb2xTdW0gPT0gMCkge1xyXG4gICAgICAgICAgICByZXNldFJlcGFpci5jbGFzc0xpc3QuYWRkKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldENoZWNrYm94Q29saXZlcigpIHtcclxuICAgIGxldCBjb250cm9sU3VtID0gMDtcclxuICAgIGNoZWNrYm94ZXNDb2xpdmVyLmZvckVhY2gocm9vbSA9PiB7XHJcbiAgICAgICAgaWYgKHJvb20uY2xhc3NMaXN0LmNvbnRhaW5zKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xTdW0rKztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbnRyb2xTdW0gPiAxKSB7XHJcbiAgICAgICAgICAgIHJlc2V0Q29saXZlci5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRyb2xTdW0gPT0gMCkge1xyXG4gICAgICAgICAgICByZXNldENvbGl2ZXIuY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzZXRDaGVja2JveFJvb20oKSB7XHJcbiAgICBsZXQgY29udHJvbFN1bSA9IDA7XHJcbiAgICBjaGVja2JveGVzUm9vbS5mb3JFYWNoKHJvb20gPT4ge1xyXG4gICAgICAgIGlmIChyb29tLmNsYXNzTGlzdC5jb250YWlucygnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICBjb250cm9sU3VtKys7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAoY29udHJvbFN1bSA9PSAwKSB7XHJcbiAgICAgICAgcmVzZXRSb29tLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5pZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ3ByZWZzJykpIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVzZXJSb29tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVzZXJSb29tJyk7XHJcbiAgICAgICAgY2hlY2tib3hlc1Jvb20uZm9yRWFjaChyb29tID0+IHtcclxuICAgICAgICAgICAgcm9vbS5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAodXNlclJvb20udGV4dENvbnRlbnQuaW5jbHVkZXMoJzEnKSAmJiByb29tLnRleHRDb250ZW50LmluY2x1ZGVzKCcxJykpIHtcclxuICAgICAgICAgICAgICAgIHJvb20uY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyUm9vbS50ZXh0Q29udGVudC5pbmNsdWRlcygnMicpICYmIHJvb20udGV4dENvbnRlbnQuaW5jbHVkZXMoJzInKSkge1xyXG4gICAgICAgICAgICAgICAgcm9vbS5jbGFzc0xpc3QuYWRkKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJSb29tLnRleHRDb250ZW50LmluY2x1ZGVzKCczJykgJiYgcm9vbS50ZXh0Q29udGVudC5pbmNsdWRlcygnMycpKSB7XHJcbiAgICAgICAgICAgICAgICByb29tLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlclJvb20udGV4dENvbnRlbnQuaW5jbHVkZXMoJzQrJykgJiYgcm9vbS50ZXh0Q29udGVudC5pbmNsdWRlcygnNCsnKSkge1xyXG4gICAgICAgICAgICAgICAgcm9vbS5jbGFzc0xpc3QuYWRkKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJSb29tLnRleHRDb250ZW50LmluY2x1ZGVzKCc0JykgJiYgcm9vbS50ZXh0Q29udGVudC5pbmNsdWRlcygnNCcpICYmICF1c2VyUm9vbS50ZXh0Q29udGVudC5pbmNsdWRlcygnKycpICYmICFyb29tLnRleHRDb250ZW50LmluY2x1ZGVzKCcrJykpIHtcclxuICAgICAgICAgICAgICAgIHJvb20uY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHVzZXJSZXBhaXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlclJlcGFpcicpO1xyXG4gICAgICAgIGNoZWNrYm94ZXNSZXBhaXIuZm9yRWFjaChyZXBhaXIgPT4ge1xyXG4gICAgICAgICAgICByZXBhaXIuY2xhc3NMaXN0LnJlbW92ZSgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgaWYgKHVzZXJSZXBhaXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Cx0LDQsdGD0YjQutC40L0nKSAmJiByZXBhaXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Cx0LDQsdGD0YjQutC40L0nKSkge1xyXG4gICAgICAgICAgICAgICAgcmVwYWlyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlclJlcGFpci50ZXh0Q29udGVudC5pbmNsdWRlcygn0JrQvtGB0LzQtdGC0LjRh9C10YHQutC40LknKSAmJiByZXBhaXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Ca0L7RgdC80LXRgtC40YfQtdGB0LrQuNC5JykpIHtcclxuICAgICAgICAgICAgICAgIHJlcGFpci5jbGFzc0xpc3QuYWRkKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJSZXBhaXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9CU0LjQt9Cw0LnQvdC10YDRgdC60LjQuScpICYmIHJlcGFpci50ZXh0Q29udGVudC5pbmNsdWRlcygn0JTQuNC30LDQudC90LXRgNGB0LrQuNC5JykpIHtcclxuICAgICAgICAgICAgICAgIHJlcGFpci5jbGFzc0xpc3QuYWRkKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJSZXBhaXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Cd0LUg0LLQsNC20L3QvicpICYmIHJlcGFpci50ZXh0Q29udGVudC5pbmNsdWRlcygn0LLQsNC20L3QvicpKSB7XHJcbiAgICAgICAgICAgICAgICByZXBhaXIuY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWNoZWNrYm94LS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHVzZXJDb2xpdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVzZXJDb2xpdmVyJyk7XHJcbiAgICAgICAgY2hlY2tib3hlc0NvbGl2ZXIuZm9yRWFjaChjb2xpdmVyID0+IHtcclxuICAgICAgICAgICAgY29saXZlci5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAodXNlckNvbGl2ZXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Ch0L7QsdCw0LrQsCcpICYmIGNvbGl2ZXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Ch0L7QsdCw0LrQsCcpKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xpdmVyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckNvbGl2ZXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Ca0L7RgicpICYmIGNvbGl2ZXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Ca0L7RgicpKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xpdmVyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckNvbGl2ZXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9CU0YDRg9Cz0LjQtScpICYmIGNvbGl2ZXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9CU0YDRg9Cz0LjQtScpKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xpdmVyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckNvbGl2ZXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Cd0LUg0LLQsNC20L3QvicpICYmIGNvbGl2ZXIudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Cy0LDQttC90L4nKSkge1xyXG4gICAgICAgICAgICAgICAgY29saXZlci5jbGFzc0xpc3QuYWRkKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCAzMDApXHJcblxyXG59IiwiaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21TZWxlY3QnKSkge1xyXG4gICAgY29uc3QgdXNlckFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlckFyZWEnKTtcclxuICAgIGNvbnN0IGN1c3RvbVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21TZWxlY3QnKTtcclxuICAgIGNvbnN0IHNlbGVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVmLXNsaWRlX19zZWxlY3QtY29udGFpbmVyJyk7XHJcbiAgICBjb25zdCBzZWxlY3RPcHRpb25zID0gc2VsZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmVmLXNsaWRlX19vcHRpb24nKTtcclxuICAgIGxldCBzYXZlZFN0cmluZyA9IGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudDtcclxuXHJcbiAgICBjdXN0b21TZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdqcy0taGlkZGVuJyk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH0pXHJcblxyXG4gICAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9IHNlbGVjdENvbnRhaW5lciAmJiAhZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJlZi1zbGlkZV9fb3B0aW9uJykgJiYgIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3ByZWYtc2xpZGVfX3NlbGVjdCcpKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwianMtLWhpZGRlblwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBzZWxlY3RPcHRpb25zLmZvckVhY2goKG9wdGlvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICBvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RPcHRpb25zWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmNsYXNzTGlzdC5jb250YWlucygncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdwcmVmLXNsaWRlX19vcHRpb24tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21TZWxlY3QudGV4dENvbnRlbnQuaW5jbHVkZXMoYCwgJHtvcHRpb24udGV4dENvbnRlbnQuc2xpY2UoMCwgNSl9YCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tU2VsZWN0LnRleHRDb250ZW50ID0gY3VzdG9tU2VsZWN0LnRleHRDb250ZW50LnJlcGxhY2UoYCwgJHtvcHRpb24udGV4dENvbnRlbnQuc2xpY2UoMCwgNSl9YCwgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudCA9IGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudC5yZXBsYWNlKGAke29wdGlvbi50ZXh0Q29udGVudC5zbGljZSgwLCA1KX1gLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21TZWxlY3QudGV4dENvbnRlbnQudHJpbSgpID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudCA9ICfQktGB0LUg0YDQsNC50L7QvdGLJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0T3B0aW9uc1swXS5jbGFzc0xpc3QuYWRkKCdwcmVmLXNsaWRlX19vcHRpb24tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIW9wdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQgPSBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQucmVwbGFjZSgn0JLRgdC1INGA0LDQudC+0L3RiycsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQgPSBgJHtjdXN0b21TZWxlY3QudGV4dENvbnRlbnR9ICR7b3B0aW9uLnRleHRDb250ZW50LnNsaWNlKDAsIDUpfWBcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tU2VsZWN0LnRleHRDb250ZW50ID0gY3VzdG9tU2VsZWN0LnRleHRDb250ZW50LnJlcGxhY2UoJ9CS0YHQtSDRgNCw0LnQvtC90YsnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudCA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQgPSBgJHtvcHRpb24udGV4dENvbnRlbnQuc2xpY2UoMCwgNSl9YFxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudCA9IGAke2N1c3RvbVNlbGVjdC50ZXh0Q29udGVudH0sICR7b3B0aW9uLnRleHRDb250ZW50LnNsaWNlKDAsIDUpfWBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0T3B0aW9ucy5mb3JFYWNoKChpbm5lcl9vcHRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpbm5lcl9vcHRpb24uY2xhc3NMaXN0LnJlbW92ZSgncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGN1c3RvbVNlbGVjdC50ZXh0Q29udGVudCA9ICfQktGB0LUg0YDQsNC50L7QvdGLJztcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAodXNlckFyZWEudGV4dENvbnRlbnQgIT09ICcnKSB7XHJcbiAgICAgICAgY3VzdG9tU2VsZWN0LnRleHRDb250ZW50ID0gdXNlckFyZWEudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgc2VsZWN0T3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyQXJlYS50ZXh0Q29udGVudC5pbmNsdWRlcygn0JvQtdC9JykgJiYgb3B0aW9uLnRleHRDb250ZW50LmluY2x1ZGVzKCfQm9C10L0nKSkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RPcHRpb25zWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFyZWEudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Ce0LrRgicpICYmIG9wdGlvbi50ZXh0Q29udGVudC5pbmNsdWRlcygn0J7QutGCJykpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5jbGFzc0xpc3QuYWRkKCdwcmVmLXNsaWRlX19vcHRpb24tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0T3B0aW9uc1swXS5jbGFzc0xpc3QucmVtb3ZlKCdwcmVmLXNsaWRlX19vcHRpb24tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBcmVhLnRleHRDb250ZW50LmluY2x1ZGVzKCfQodCy0LXRgCcpICYmIG9wdGlvbi50ZXh0Q29udGVudC5pbmNsdWRlcygn0KHQstC10YAnKSkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RPcHRpb25zWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFyZWEudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Cf0YDQsNCy0L4nKSAmJiBvcHRpb24udGV4dENvbnRlbnQuaW5jbHVkZXMoJ9Cf0YDQsNCy0L4nKSkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RPcHRpb25zWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFyZWEudGV4dENvbnRlbnQuaW5jbHVkZXMoJ9CS0YHQtScpICYmIG9wdGlvbi50ZXh0Q29udGVudC5pbmNsdWRlcygn0JLRgdC1JykpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5jbGFzc0xpc3QuYWRkKCdwcmVmLXNsaWRlX19vcHRpb24tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0T3B0aW9uc1swXS5jbGFzc0xpc3QucmVtb3ZlKCdwcmVmLXNsaWRlX19vcHRpb24tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlckJ1ZGdldElucHV0JykpIHtcclxuICAgIGNvbnN0IHVzZXJCdWRnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlckJ1ZGdldCcpO1xyXG4gICAgbGV0IHZhbHVlID0gNTAwMDA7XHJcbiAgICBpZiAodXNlckJ1ZGdldCAhPT0gJycpIHtcclxuICAgICAgICB2YWx1ZSA9IHBhcnNlSW50KHVzZXJCdWRnZXQudGV4dENvbnRlbnQpO1xyXG4gICAgICAgICQoXCIjdXNlckJ1ZGdldElucHV0XCIpLnZhbCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICAkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiI3VzZXJCdWRnZXRcIikuc2xpZGVyKHtcclxuICAgICAgICAgICAgcmFuZ2U6IFwibWluXCIsXHJcbiAgICAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgICAgbWF4OiAyMDAwMDAsXHJcbiAgICAgICAgICAgIHN0ZXA6IDEwMDAsXHJcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcclxuICAgICAgICAgICAgc2xpZGU6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjdXNlckJ1ZGdldElucHV0XCIpLnZhbCh1aS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGJ1ZGdldElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJCdWRnZXRJbnB1dCcpO1xyXG5cclxuICAgIGJ1ZGdldElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlSW5wdXQgPSBidWRnZXRJbnB1dC52YWx1ZTtcclxuICAgICAgICAkKFwiI3VzZXJCdWRnZXRcIikuc2xpZGVyKFwidmFsdWVcIiwgdmFsdWVJbnB1dCk7XHJcbiAgICB9KVxyXG59IiwiaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXRGb3JtJykpIHtcclxuICAgIGNvbnN0IHN1Ym1pdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VibWl0Rm9ybScpO1xyXG4gICAgbGV0IHJvb21zQW1vdW50ID0gJyc7XHJcbiAgICBsZXQgYnVkZ2V0ID0gJyc7XHJcbiAgICBsZXQgYXJlYVNlYXJjaCA9ICcnO1xyXG4gICAgbGV0IHJlcGFpclByZWZzID0gJyc7XHJcbiAgICBsZXQgY29saXZlclByZWZzID0gJyc7XHJcblxyXG4gICAgbGV0IHByZWZzT2JqZWN0ID0ge1xyXG4gICAgICAgIHJvb21zQW1vdW50OiAnJyxcclxuICAgICAgICBidWRnZXQ6ICcnLFxyXG4gICAgICAgIGFyZWFTZWFyY2g6ICcnLFxyXG4gICAgICAgIHJlcGFpclByZWZzOiAnJyxcclxuICAgICAgICBjb2xpdmVyUHJlZnM6ICcnLFxyXG4gICAgfVxyXG5cclxuICAgIHN1Ym1pdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgc3VibWl0Rm9ybS5jbGFzc0xpc3QuYWRkKCdqcy0taW5hY3RpdmUnKVxyXG4gICAgICAgIGdldFJvb21zQW1vdW50KCk7XHJcbiAgICAgICAgZ2V0UmVwYWlyUHJlZnMoKTtcclxuICAgICAgICBnZXRDb2xpdmVyUHJlZnMoKTtcclxuICAgICAgICBidWRnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlckJ1ZGdldElucHV0JykudmFsdWU7XHJcbiAgICAgICAgYXJlYVNlYXJjaCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21TZWxlY3QnKS50ZXh0Q29udGVudDtcclxuICAgICAgICBjb25zdCBpbnB1dFJvb21zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb21zQW1vdW50Jyk7XHJcbiAgICAgICAgY29uc3QgaW5wdXRCdWRnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnVkZ2V0QW1vdW50Jyk7XHJcbiAgICAgICAgY29uc3QgaW5wdXRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FyZWFTZWFyY2gnKTtcclxuICAgICAgICBjb25zdCBpbnB1dFJlcGFpcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwYWlyUHJlZnMnKTtcclxuICAgICAgICBjb25zdCBpbnB1dENvbGl2ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29saXZlclByZWZzJyk7XHJcbiAgICAgICAgaW5wdXRSb29tcy52YWx1ZSA9IHJvb21zQW1vdW50O1xyXG4gICAgICAgIGlucHV0QnVkZ2V0LnZhbHVlID0gYnVkZ2V0O1xyXG4gICAgICAgIGlucHV0QXJlYS52YWx1ZSA9IGFyZWFTZWFyY2g7XHJcbiAgICAgICAgaW5wdXRSZXBhaXJzLnZhbHVlID0gcmVwYWlyUHJlZnM7XHJcbiAgICAgICAgaW5wdXRDb2xpdmVyLnZhbHVlID0gY29saXZlclByZWZzO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmVmc0Zvcm0nKS5zdWJtaXQoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLy8gJChmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAkKFwiI3ByZWZzRm9ybVwiKS5vbihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZSkge1xyXG4vLyAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbi8vICAgICAgICAgJC5hamF4KHtcclxuLy8gICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXHJcbi8vICAgICAgICAgICAgIHVybDogJzw/cGhwIGFkbWluX3VybCggJ2FkbWluLSBhamF4LnBocCcgKT8+JyxcclxuLy8gICAgICAgICAgICAgZGF0YToge1xyXG4vLyAgICAgICAgICAgICBhY3Rpb246IFwidXBkYXRlX3ByZWZzXCIsXHJcbi8vICAgICAgICAgICAgIHJvb21zQW1vdW50OiBwcmVmc09iamVjdC5yb29tc0Ftb3VudCxcclxuLy8gICAgICAgICAgICAgYnVkZ2V0OiBwcmVmc09iamVjdC5idWRnZXQsXHJcbi8vICAgICAgICAgICAgIGFyZWFTZWFyY2g6IHByZWZzT2JqZWN0LmFyZWFTZWFyY2gsXHJcbi8vICAgICAgICAgICAgIHJlcGFpclByZWZzOiBwcmVmc09iamVjdC5yZXBhaXJQcmVmcyxcclxuLy8gICAgICAgICAgICAgY29saXZlclByZWZzOiBwcmVmc09iamVjdC5jb2xpdmVyUHJlZnMsXHJcbi8vICAgICAgICAgfSxcclxuLy8gICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSwgJ3Jlc3BvbnNlJyk7XHJcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzcycsICdzdGF0dXMnKTtcclxuLy8gICAgICAgICAgICAgfSxcclxuLy8gICAgICAgICB9KTtcclxuLy8gfSk7XHJcbi8vIH0pO1xyXG5cclxuZnVuY3Rpb24gZ2V0Um9vbXNBbW91bnQoKSB7XHJcbiAgICBjb25zdCByb29tc0NoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucm9vbUNoZWNrYm94Jyk7XHJcbiAgICByb29tc0NoZWNrYm94ZXMuZm9yRWFjaChib3ggPT4ge1xyXG4gICAgICAgIGlmIChib3guY2xhc3NMaXN0LmNvbnRhaW5zKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGJveC50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgcm9vbXNBbW91bnQgKz0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJvb21zQW1vdW50ICs9ICcsICdcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgcm9vbXNBbW91bnQgPSByb29tc0Ftb3VudC50cmltKCk7XHJcbiAgICByb29tc0Ftb3VudCA9IHJvb21zQW1vdW50LnNsaWNlKDAsIHJvb21zQW1vdW50Lmxlbmd0aCAtIDEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRSZXBhaXJQcmVmcygpIHtcclxuICAgIGNvbnN0IHJlcGFpcnNDaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlcGFpckNoZWNrYm94Jyk7XHJcbiAgICByZXBhaXJzQ2hlY2tib3hlcy5mb3JFYWNoKGJveCA9PiB7XHJcbiAgICAgICAgaWYgKGJveC5jbGFzc0xpc3QuY29udGFpbnMoJ2N1c3RvbS1jaGVja2JveC0tYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScpO1xyXG4gICAgICAgICAgICByZXBhaXJQcmVmcyArPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmVwYWlyUHJlZnMgKz0gJywgJ1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXBhaXJQcmVmcyA9IHJlcGFpclByZWZzLnRyaW0oKTtcclxuICAgIHJlcGFpclByZWZzID0gcmVwYWlyUHJlZnMuc2xpY2UoMCwgcmVwYWlyUHJlZnMubGVuZ3RoIC0gMSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENvbGl2ZXJQcmVmcygpIHtcclxuICAgIGNvbnN0IGNvbGl2ZXJDaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbGl2ZXJDaGVja2JveCcpO1xyXG4gICAgY29saXZlckNoZWNrYm94ZXMuZm9yRWFjaChib3ggPT4ge1xyXG4gICAgICAgIGlmIChib3guY2xhc3NMaXN0LmNvbnRhaW5zKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGJveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKTtcclxuICAgICAgICAgICAgY29saXZlclByZWZzICs9IHZhbHVlO1xyXG4gICAgICAgICAgICBjb2xpdmVyUHJlZnMgKz0gJywgJ1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICBjb2xpdmVyUHJlZnMgPSBjb2xpdmVyUHJlZnMudHJpbSgpO1xyXG4gICAgY29saXZlclByZWZzID0gY29saXZlclByZWZzLnNsaWNlKDAsIGNvbGl2ZXJQcmVmcy5sZW5ndGggLSAxKTtcclxufVxyXG5cclxuXHJcbiIsIi8vIFN3aXBlciBTZWN0aW9uXHJcblxyXG5jb25zdCBzbGlkZXJDb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN3aXBlci1hZHQnKTtcclxuXHJcbnNsaWRlckNvbnRhaW5lcnMuZm9yRWFjaCgoc3dpcGVyLCBpbmRleCkgPT4ge1xyXG4gICAgY29uc3Qgc3dpcGVyUGFnaW5hdGlvbiA9IHN3aXBlci5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXBhZ2luYXRpb24nKTtcclxuICAgIHN3aXBlci5jbGFzc0xpc3QuYWRkKGBzd2lwZXItYWR0LS0ke2luZGV4fWApO1xyXG4gICAgc3dpcGVyUGFnaW5hdGlvbi5jbGFzc0xpc3QuYWRkKGBzd2lwZXItcGFnaW5hdGlvbi0tJHtpbmRleH1gKTtcclxuICAgIGNvbnN0IGFkdFN3aXBlciA9IG5ldyBTd2lwZXIoYC5zd2lwZXItYWR0LS0ke2luZGV4fWAsIHtcclxuICAgICAgICBzcGVlZDogNDAwLFxyXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgIGVmZmVjdDogJ2NhcmRzJyxcclxuICAgICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgZWw6IGAuc3dpcGVyLXBhZ2luYXRpb24tLSR7aW5kZXh9YCxcclxuICAgICAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG59KTsiLCJcclxuY29uc3QgYWxsTmV4dEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJlZi1zbGlkZV9fYnV0dG9uJyk7XHJcbmNvbnN0IGFsbFNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmVmLXNsaWRlJyk7XHJcbmFsbE5leHRCdXR0b25zLmZvckVhY2goKGJ1dHRvbiwgaW5kZXgpID0+IHtcclxuICAgIGlmIChpbmRleCAhPT0gMikge1xyXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgYWxsU2xpZGVzW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdqcy0taGlkZGVuJyk7XHJcbiAgICAgICAgICAgIGFsbFNsaWRlc1tpbmRleCArIDFdLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1oaWRkZW4nKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59KVxyXG4iLCJmdW5jdGlvbiBhY3RpdmF0ZUZvcm1zKCkge1xyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWduaW4tZm9ybScpKSB7XHJcbiAgICAgICAgY29uc3Qgc2lnbmluRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWduaW4tZm9ybScpO1xyXG4gICAgICAgIGNvbnN0IHNpZ251cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lnbnVwLWZvcm0nKTtcclxuICAgICAgICBjb25zdCBjYXB0aW9uSW4gPSBzaWduaW5Gb3JtLnF1ZXJ5U2VsZWN0b3IoJy5jYXB0aW9uJyk7XHJcbiAgICAgICAgY29uc3QgY2FwdGlvblVwID0gc2lnbnVwRm9ybS5xdWVyeVNlbGVjdG9yKCcuY2FwdGlvbicpO1xyXG4gICAgICAgIGNhcHRpb25Jbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgc2lnbmluRm9ybS5jbGFzc0xpc3QuYWRkKCdqcy0taGlkZGVuJyk7XHJcbiAgICAgICAgICAgIHNpZ251cEZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnanMtLWhpZGRlbicpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgY2FwdGlvblVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzaWduaW5Gb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1oaWRkZW4nKTtcclxuICAgICAgICAgICAgc2lnbnVwRm9ybS5jbGFzc0xpc3QuYWRkKCdqcy0taGlkZGVuJyk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cclxuc2V0VGltZW91dChhY3RpdmF0ZUZvcm1zLCAzMDApIiwiY29uc3QgdGltZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lc3NhZ2UtdGltZScpO1xyXG5jb25zdCBmb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXQtZm9ybScpO1xyXG5mdW5jdGlvbiBtb2RpZnlUaW1lKCkge1xyXG4gICAgdGltZXJzLmZvckVhY2godGltZXIgPT4ge1xyXG4gICAgICAgIGxldCB0aW1lclZhbHVlID0gdGltZXIudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdGltZXJWYWx1ZSA9IHRpbWVyVmFsdWUuc2xpY2UoMTEsIDE3KTtcclxuICAgICAgICB0aW1lci50ZXh0Q29udGVudCA9IHRpbWVyVmFsdWU7XHJcbiAgICB9KVxyXG59XHJcblxyXG5tb2RpZnlUaW1lKCk7XHJcblxyXG5cclxuXHJcbiIsImlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9nZ2VkJykpIHtcclxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9nZ2VkJykgPT0gJ3RydWUnKSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY2NvdW50Jyk7XHJcbiAgICAgICAgYWNjb3VudC5jbGFzc0xpc3QuYWRkKCdhY2NvdW50LS1sb2dnZWQnKTtcclxuICAgIH1cclxufSIsImlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudU9wZW5lcicpKSB7XHJcbiAgICBjb25zdCBvcGVuZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudU9wZW5lcicpO1xyXG4gICAgb3BlbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIG9wZW5lci5jbGFzc0xpc3QuYWRkKCdvcGVuZXItLWFjdGl2ZScpXHJcbiAgICB9KVxyXG4gICAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9IG9wZW5lciAmJiAhZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2hlY2tTcGFuJykpIHtcclxuICAgICAgICAgICAgb3BlbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuZXItLWFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59IiwiZnVuY3Rpb24gYWN0aXZhdGVMb2dvdXQoKSB7XHJcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtaGVhZGVyJykpIHtcclxuICAgICAgICBjb25zdCBtZW51SGVhYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LWhlYWRlcicpO1xyXG4gICAgICAgIGNvbnN0IGxvZ291dExpbmsgPSBtZW51SGVhYWRlci5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbiAgICAgICAgY29uc3QgbG9nb3V0TGlua0luTmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ291dExpbmsnKTtcclxuICAgICAgICBsb2dvdXRMaW5rSW5OYXYuaHJlZiA9IGxvZ291dExpbmsuaHJlZjtcclxuXHJcbiAgICAgICAgbG9nb3V0TGlua0luTmF2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvZ2dlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9nZ2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY2NvdW50Jyk7XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjY291bnQtLWxvZ2dlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cclxuc2V0VGltZW91dChhY3RpdmF0ZUxvZ291dCwgMzAwKSIsImNvbnN0IHBhZ2VMb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG5jb25zdCBwcm9wcyA9IFsn0JLQsNGIINC/0YDQvtGE0LjQu9GMJywgJ9CS0LDRiNC4INGB0L7QvtCx0YnQtdC90LjRjyddO1xyXG5cclxuaWYgKHBhZ2VMb2NhdGlvbi5pbmNsdWRlcygncHJvZmlsZScpIHx8IHBhZ2VMb2NhdGlvbi5pbmNsdWRlcygnc3Vic2NyaXB0aW9uJykpIHtcclxuICAgIGNvbnN0IGFsbE5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2ZpbGUtbmF2aWdhdGlvbl9fbGluaycpO1xyXG4gICAgY29uc3Qgc2VjdGlvbkhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdQcm9maWxlSGVhZGVyJyk7XHJcbiAgICBjb25zdCBhdmF0YXJGcmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5say1zaWRlYmFyJylcclxuICAgIGFsbE5hdkxpbmtzLmZvckVhY2goKGxpbmssIGluZGV4KSA9PiB7XHJcbiAgICAgICAgaWYgKGluZGV4ICE9PSA0KSB7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmhyZWYuaW5jbHVkZXMoJ3RhYj1jaGF0JylcclxuICAgICAgICAgICAgICAgICYmIHBhZ2VMb2NhdGlvbi5pbmNsdWRlcygndGFiPWNoYXQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGluay5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLW5hdmlnYXRpb25fX2xpbmstLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkhlYWRlci50ZXh0Q29udGVudCA9IHByb3BzWzFdO1xyXG4gICAgICAgICAgICAgICAgYXZhdGFyRnJhbWUuY2xhc3NMaXN0LmFkZCgnanMtLWhpZGRlbicpXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGluay5ocmVmLmluY2x1ZGVzKCd1c2VyJylcclxuICAgICAgICAgICAgICAgICYmIHBhZ2VMb2NhdGlvbi5pbmNsdWRlcygndXNlcicpICYmICFwYWdlTG9jYXRpb24uaW5jbHVkZXMoJ2NoYXQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGluay5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLW5hdmlnYXRpb25fX2xpbmstLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkhlYWRlci50ZXh0Q29udGVudCA9IHByb3BzWzBdO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmsuaHJlZi5pbmNsdWRlcygnc3Vic2NyaXB0aW9uJylcclxuICAgICAgICAgICAgICAgICYmIHBhZ2VMb2NhdGlvbi5pbmNsdWRlcygnc3Vic2NyaXB0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIGxpbmsuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1uYXZpZ2F0aW9uX19saW5rLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn0iXX0=
