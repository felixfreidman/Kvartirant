"use strict";var customSelect,selectContainer,selectOptions,savedString,budgetInput,allNextButtons,allSlides,roomChecks=document.querySelectorAll(".custom-checkbox"),sliderContainers=(roomChecks.forEach(function(e){e.addEventListener("click",function(){e.classList.toggle("custom-checkbox--active")})}),document.getElementById("customSelect")&&(customSelect=document.getElementById("customSelect"),selectContainer=document.querySelector(".pref-slide__select-container"),selectOptions=selectContainer.querySelectorAll(".pref-slide__option"),savedString=customSelect.textContent,customSelect.addEventListener("click",function(){setTimeout(function(){selectContainer.classList.remove("js--hidden")},100)}),window.onclick=function(e){e.target==selectContainer||e.target.classList.contains("pref-slide__option")||e.target.classList.contains("pref-slide__select")||selectContainer.classList.add("js--hidden")},selectOptions.forEach(function(e,t){e.addEventListener("click",function(){0!=t?(selectOptions[0].classList.remove("pref-slide__option--active"),e.classList.toggle("pref-slide__option--active"),customSelect.textContent=customSelect.textContent.replace("Все районы",""),""==customSelect.textContent?customSelect.textContent="".concat(e.textContent.slice(0,5)):customSelect.textContent="".concat(customSelect.textContent,", ").concat(e.textContent.slice(0,5))):(selectOptions.forEach(function(e){e.classList.remove("pref-slide__option--active")}),e.classList.add("pref-slide__option--active"),customSelect.textContent="Все районы")})})),document.getElementById("userBudgetInput")&&($(function(){$("#userBudget").slider({range:"min",min:0,max:2e5,step:1e3,value:5e4,slide:function(e,t){$("#userBudgetInput").val(t.value)}})}),(budgetInput=document.getElementById("userBudgetInput")).addEventListener("input",function(){var e=budgetInput.value;$("#userBudget").slider("value",e)})),document.querySelectorAll(".swiper-adt"));function activateForms(){var e,t,n,c,o,i;document.querySelector(".signin-form")&&(e=document.querySelector(".signin-form"),t=document.querySelector(".signup-form"),n=e.querySelector(".caption"),c=t.querySelector(".caption"),o=document.getElementById("signin-special"),i=document.getElementById("signup-special"),n.addEventListener("click",function(){e.classList.add("js--hidden"),t.classList.remove("js--hidden")}),c.addEventListener("click",function(){e.classList.remove("js--hidden"),t.classList.add("js--hidden")}),o.addEventListener("click",function(){localStorage.setItem("logged",!0)}),i.addEventListener("click",function(){localStorage.setItem("logged",!0)}))}sliderContainers.forEach(function(e,t){var n=e.querySelector(".swiper-pagination");e.classList.add("swiper-adt--".concat(t)),n.classList.add("swiper-pagination--".concat(t)),new Swiper(".swiper-adt--".concat(t),{speed:400,spaceBetween:0,slidesPerView:1,effect:"cards",direction:"horizontal",loop:!0,pagination:{el:".swiper-pagination--".concat(t),clickable:!0}})}),window.location.href.includes("prefs")&&(allNextButtons=document.querySelectorAll(".pref-slide__button"),allSlides=document.querySelectorAll(".pref-slide"),allNextButtons.forEach(function(e,t){e.addEventListener("click",function(){allSlides[t].classList.add("js--hidden"),allSlides[t+1].classList.remove("js--hidden")})})),setTimeout(activateForms,300);var account,opener,timers=document.querySelectorAll(".message-time"),formContainer=document.querySelectorAll(".chat-form");function modifyTime(){timers.forEach(function(e){var t=(t=e.textContent).slice(11,17);e.textContent=t})}function activateLogout(){var e,t;document.getElementById("menu-header")&&(e=document.getElementById("menu-header").querySelector("a"),(t=document.getElementById("logoutLink")).href=e.href,t.addEventListener("click",function(){localStorage.getItem("logged")&&(localStorage.setItem("logged",!1),document.querySelector(".account").classList.remove("account--logged"))}))}modifyTime(),setTimeout(activateLogout,300),localStorage.getItem("logged")&&"true"==localStorage.getItem("logged")&&(account=document.querySelector(".account")).classList.add("account--logged"),document.getElementById("menuOpener")&&((opener=document.getElementById("menuOpener")).addEventListener("click",function(){opener.classList.add("opener--active")}),window.onclick=function(e){e.target==opener||e.target.classList.contains("checkSpan")||opener.classList.remove("opener--active")});var allNavLinks,sectionHeader,avatarFrame,pageLocation=window.location.href,props=["Ваш профиль","Ваши сообщения"];(pageLocation.includes("profile")||pageLocation.includes("subscription"))&&(allNavLinks=document.querySelectorAll(".profile-navigation__link"),sectionHeader=document.getElementById("ProfileHeader"),avatarFrame=document.querySelector(".lk-sidebar"),allNavLinks.forEach(function(e,t){4!==t&&(e.href.includes("tab=chat")&&pageLocation.includes("tab=chat")?(e.classList.add("profile-navigation__link--active"),sectionHeader.textContent=props[1],avatarFrame.classList.add("js--hidden")):e.href.includes("user")&&pageLocation.includes("user")&&!pageLocation.includes("chat")?(e.classList.add("profile-navigation__link--active"),sectionHeader.textContent=props[0]):e.href.includes("subscription")&&pageLocation.includes("subscription")&&e.classList.add("profile-navigation__link--active"))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm1fQ3VzdG9tQ2hlY2tib3guanMiLCJmb3JtX0N1c3RvbVNlbGVjdC5qcyIsImZvcm1fU2xpZGVyLmpzIiwicHJlZnNfVGVzdExvZ2ljLmpzIiwicGx1Z2luX1N3aXBlckNvbmZpZy5qcyIsInByb2ZpbGVfQXV0aG9yaXphdGlvbi5qcyIsInByb2ZpbGVfQ2hhdFNldHRpbmdzLmpzIiwicHJvZmlsZV9Mb2dTdGF0dXMuanMiLCJwcm9maWxlX01vYmlsZU5hdmlnYXRpb24uanMiLCJwcm9maWxlX0xvZ291dEJ1dHRvbi5qcyIsInByb2ZpbGVfTmF2aWdhdGlvbi5qcyJdLCJuYW1lcyI6WyJjdXN0b21TZWxlY3QiLCJzZWxlY3RDb250YWluZXIiLCJzZWxlY3RPcHRpb25zIiwic2F2ZWRTdHJpbmciLCJidWRnZXRJbnB1dCIsImFsbE5leHRCdXR0b25zIiwiYWxsU2xpZGVzIiwicm9vbUNoZWNrcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInNsaWRlckNvbnRhaW5lcnMiLCJmb3JFYWNoIiwicm9vbSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJnZXRFbGVtZW50QnlJZCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJ3aW5kb3ciLCJvbmNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjb250YWlucyIsImFkZCIsIm9wdGlvbiIsImluZGV4IiwicmVwbGFjZSIsImNvbmNhdCIsInNsaWNlIiwiaW5uZXJfb3B0aW9uIiwiJCIsInNsaWRlciIsInJhbmdlIiwibWluIiwibWF4Iiwic3RlcCIsInZhbHVlIiwic2xpZGUiLCJ1aSIsInZhbCIsInZhbHVlSW5wdXQiLCJhY3RpdmF0ZUZvcm1zIiwic2lnbmluRm9ybSIsInNpZ251cEZvcm0iLCJjYXB0aW9uSW4iLCJjYXB0aW9uVXAiLCJmb3JtU2lnbkluUmVhbCIsImZvcm1TaWduVXBSZWFsIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInN3aXBlciIsInN3aXBlclBhZ2luYXRpb24iLCJTd2lwZXIiLCJzcGVlZCIsInNwYWNlQmV0d2VlbiIsInNsaWRlc1BlclZpZXciLCJlZmZlY3QiLCJkaXJlY3Rpb24iLCJsb29wIiwicGFnaW5hdGlvbiIsImVsIiwiY2xpY2thYmxlIiwibG9jYXRpb24iLCJocmVmIiwiaW5jbHVkZXMiLCJidXR0b24iLCJhY2NvdW50Iiwib3BlbmVyIiwidGltZXJzIiwiZm9ybUNvbnRhaW5lciIsIm1vZGlmeVRpbWUiLCJ0aW1lciIsInRpbWVyVmFsdWUiLCJhY3RpdmF0ZUxvZ291dCIsImxvZ291dExpbmsiLCJsb2dvdXRMaW5rSW5OYXYiLCJnZXRJdGVtIiwiYWxsTmF2TGlua3MiLCJzZWN0aW9uSGVhZGVyIiwiYXZhdGFyRnJhbWUiLCJwYWdlTG9jYXRpb24iLCJwcm9wcyIsImxpbmsiXSwibWFwcGluZ3MiOiJhQUNBLElDQ0FBLGFBQ0FDLGdCQUNBQyxjQUNBQyxZQ1VBQyxZQ2RBQyxlQUNBQyxVSERBQyxXQUFBQyxTQUFBQyxpQkFBQSxrQkFBQSxFSUNBQyxrQkpDQUgsV0FBQUksUUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxpQkFBQSxRQUFBLFdBQ0FELEVBQUFFLFVBQUFDLE9BQUEseUJBQUEsQ0FDQSxDQUFBLENBQ0EsQ0FBQSxFQ1BBUCxTQUFBUSxlQUFBLGNBQUEsSUFFQWhCLGFBQUFRLFNBQUFRLGVBQUEsY0FBQSxFQUNBZixnQkFBQU8sU0FBQVMsY0FBQSwrQkFBQSxFQUNBZixjQUFBRCxnQkFBQVEsaUJBQUEscUJBQUEsRUFDQU4sWUFBQUgsYUFBQWtCLFlBRUFsQixhQUFBYSxpQkFBQSxRQUFBLFdBQ0FNLFdBQUEsV0FDQWxCLGdCQUFBYSxVQUFBTSxPQUFBLFlBQUEsQ0FDQSxFQUFBLEdBQUEsQ0FDQSxDQUFBLEVBRUFDLE9BQUFDLFFBQUEsU0FBQUMsR0FDQUEsRUFBQUMsUUFBQXZCLGlCQUFBc0IsRUFBQUMsT0FBQVYsVUFBQVcsU0FBQSxvQkFBQSxHQUFBRixFQUFBQyxP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QSxDQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY29uc3Qgcm9vbUNoZWNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jdXN0b20tY2hlY2tib3gnKTtcclxuXHJcbnJvb21DaGVja3MuZm9yRWFjaChyb29tID0+IHtcclxuICAgIHJvb20uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgcm9vbS5jbGFzc0xpc3QudG9nZ2xlKCdjdXN0b20tY2hlY2tib3gtLWFjdGl2ZScpXHJcbiAgICB9KVxyXG59KVxyXG4iLCJpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbVNlbGVjdCcpKSB7XHJcblxyXG4gICAgY29uc3QgY3VzdG9tU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbVNlbGVjdCcpO1xyXG4gICAgY29uc3Qgc2VsZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZWYtc2xpZGVfX3NlbGVjdC1jb250YWluZXInKTtcclxuICAgIGNvbnN0IHNlbGVjdE9wdGlvbnMgPSBzZWxlY3RDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnByZWYtc2xpZGVfX29wdGlvbicpO1xyXG4gICAgbGV0IHNhdmVkU3RyaW5nID0gY3VzdG9tU2VsZWN0LnRleHRDb250ZW50O1xyXG5cclxuICAgIGN1c3RvbVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZWN0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1oaWRkZW4nKTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfSlcclxuXHJcbiAgICB3aW5kb3cub25jbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC50YXJnZXQgIT0gc2VsZWN0Q29udGFpbmVyICYmICFldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcmVmLXNsaWRlX19vcHRpb24nKSAmJiAhZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJlZi1zbGlkZV9fc2VsZWN0JykpIHtcclxuICAgICAgICAgICAgc2VsZWN0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJqcy0taGlkZGVuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIHNlbGVjdE9wdGlvbnMuZm9yRWFjaCgob3B0aW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIG9wdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGluZGV4ICE9IDApIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdE9wdGlvbnNbMF0uY2xhc3NMaXN0LnJlbW92ZSgncHJlZi1zbGlkZV9fb3B0aW9uLS1hY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ3ByZWYtc2xpZGVfX29wdGlvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQgPSBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQucmVwbGFjZSgn0JLRgdC1INGA0LDQudC+0L3RiycsICcnKTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXN0b21TZWxlY3QudGV4dENvbnRlbnQgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQgPSBgJHtvcHRpb24udGV4dENvbnRlbnQuc2xpY2UoMCwgNSl9YFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXN0b21TZWxlY3QudGV4dENvbnRlbnQgPSBgJHtjdXN0b21TZWxlY3QudGV4dENvbnRlbnR9LCAke29wdGlvbi50ZXh0Q29udGVudC5zbGljZSgwLCA1KX1gXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RPcHRpb25zLmZvckVhY2goKGlubmVyX29wdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlubmVyX29wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdwcmVmLXNsaWRlX19vcHRpb24tLWFjdGl2ZScpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5jbGFzc0xpc3QuYWRkKCdwcmVmLXNsaWRlX19vcHRpb24tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgY3VzdG9tU2VsZWN0LnRleHRDb250ZW50ID0gJ9CS0YHQtSDRgNCw0LnQvtC90YsnO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59IiwiaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyQnVkZ2V0SW5wdXQnKSkge1xyXG5cclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCIjdXNlckJ1ZGdldFwiKS5zbGlkZXIoe1xyXG4gICAgICAgICAgICByYW5nZTogXCJtaW5cIixcclxuICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICBtYXg6IDIwMDAwMCxcclxuICAgICAgICAgICAgc3RlcDogMTAwMCxcclxuICAgICAgICAgICAgdmFsdWU6IDUwMDAwLFxyXG4gICAgICAgICAgICBzbGlkZTogZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xyXG4gICAgICAgICAgICAgICAgJChcIiN1c2VyQnVkZ2V0SW5wdXRcIikudmFsKHVpLnZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYnVkZ2V0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlckJ1ZGdldElucHV0Jyk7XHJcblxyXG4gICAgYnVkZ2V0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWVJbnB1dCA9IGJ1ZGdldElucHV0LnZhbHVlO1xyXG4gICAgICAgICQoXCIjdXNlckJ1ZGdldFwiKS5zbGlkZXIoXCJ2YWx1ZVwiLCB2YWx1ZUlucHV0KTtcclxuICAgIH0pXHJcbn0iLCJpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ3ByZWZzJykpIHtcclxuICAgIGNvbnN0IGFsbE5leHRCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByZWYtc2xpZGVfX2J1dHRvbicpO1xyXG4gICAgY29uc3QgYWxsU2xpZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByZWYtc2xpZGUnKTtcclxuICAgIGFsbE5leHRCdXR0b25zLmZvckVhY2goKGJ1dHRvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGFsbFNsaWRlc1tpbmRleF0uY2xhc3NMaXN0LmFkZCgnanMtLWhpZGRlbicpO1xyXG4gICAgICAgICAgICBhbGxTbGlkZXNbaW5kZXggKyAxXS5jbGFzc0xpc3QucmVtb3ZlKCdqcy0taGlkZGVuJyk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn0iLCIvLyBTd2lwZXIgU2VjdGlvblxyXG5cclxuY29uc3Qgc2xpZGVyQ29udGFpbmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zd2lwZXItYWR0Jyk7XHJcblxyXG5zbGlkZXJDb250YWluZXJzLmZvckVhY2goKHN3aXBlciwgaW5kZXgpID0+IHtcclxuICAgIGNvbnN0IHN3aXBlclBhZ2luYXRpb24gPSBzd2lwZXIucXVlcnlTZWxlY3RvcignLnN3aXBlci1wYWdpbmF0aW9uJyk7XHJcbiAgICBzd2lwZXIuY2xhc3NMaXN0LmFkZChgc3dpcGVyLWFkdC0tJHtpbmRleH1gKTtcclxuICAgIHN3aXBlclBhZ2luYXRpb24uY2xhc3NMaXN0LmFkZChgc3dpcGVyLXBhZ2luYXRpb24tLSR7aW5kZXh9YCk7XHJcbiAgICBjb25zdCBhZHRTd2lwZXIgPSBuZXcgU3dpcGVyKGAuc3dpcGVyLWFkdC0tJHtpbmRleH1gLCB7XHJcbiAgICAgICAgc3BlZWQ6IDQwMCxcclxuICAgICAgICBzcGFjZUJldHdlZW46IDAsXHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICBlZmZlY3Q6ICdjYXJkcycsXHJcbiAgICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICAgIGVsOiBgLnN3aXBlci1wYWdpbmF0aW9uLS0ke2luZGV4fWAsXHJcbiAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgfSlcclxufSk7IiwiZnVuY3Rpb24gYWN0aXZhdGVGb3JtcygpIHtcclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lnbmluLWZvcm0nKSkge1xyXG4gICAgICAgIGNvbnN0IHNpZ25pbkZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lnbmluLWZvcm0nKTtcclxuICAgICAgICBjb25zdCBzaWdudXBGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZ251cC1mb3JtJyk7XHJcbiAgICAgICAgY29uc3QgY2FwdGlvbkluID0gc2lnbmluRm9ybS5xdWVyeVNlbGVjdG9yKCcuY2FwdGlvbicpO1xyXG4gICAgICAgIGNvbnN0IGNhcHRpb25VcCA9IHNpZ251cEZvcm0ucXVlcnlTZWxlY3RvcignLmNhcHRpb24nKTtcclxuICAgICAgICBjb25zdCBmb3JtU2lnbkluUmVhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWduaW4tc3BlY2lhbCcpO1xyXG4gICAgICAgIGNvbnN0IGZvcm1TaWduVXBSZWFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ251cC1zcGVjaWFsJyk7XHJcbiAgICAgICAgY2FwdGlvbkluLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzaWduaW5Gb3JtLmNsYXNzTGlzdC5hZGQoJ2pzLS1oaWRkZW4nKTtcclxuICAgICAgICAgICAgc2lnbnVwRm9ybS5jbGFzc0xpc3QucmVtb3ZlKCdqcy0taGlkZGVuJyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICBjYXB0aW9uVXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHNpZ25pbkZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnanMtLWhpZGRlbicpO1xyXG4gICAgICAgICAgICBzaWdudXBGb3JtLmNsYXNzTGlzdC5hZGQoJ2pzLS1oaWRkZW4nKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBmb3JtU2lnbkluUmVhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xvZ2dlZCcsIHRydWUpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgZm9ybVNpZ25VcFJlYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2dnZWQnLCB0cnVlKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbnNldFRpbWVvdXQoYWN0aXZhdGVGb3JtcywgMzAwKSIsImNvbnN0IHRpbWVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlLXRpbWUnKTtcclxuY29uc3QgZm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGF0LWZvcm0nKTtcclxuZnVuY3Rpb24gbW9kaWZ5VGltZSgpIHtcclxuICAgIHRpbWVycy5mb3JFYWNoKHRpbWVyID0+IHtcclxuICAgICAgICBsZXQgdGltZXJWYWx1ZSA9IHRpbWVyLnRleHRDb250ZW50O1xyXG4gICAgICAgIHRpbWVyVmFsdWUgPSB0aW1lclZhbHVlLnNsaWNlKDExLCAxNyk7XHJcbiAgICAgICAgdGltZXIudGV4dENvbnRlbnQgPSB0aW1lclZhbHVlO1xyXG4gICAgfSlcclxufVxyXG5cclxubW9kaWZ5VGltZSgpO1xyXG5cclxuXHJcblxyXG4iLCJpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvZ2dlZCcpKSB7XHJcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvZ2dlZCcpID09ICd0cnVlJykge1xyXG4gICAgICAgIGNvbnN0IGFjY291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWNjb3VudCcpO1xyXG4gICAgICAgIGFjY291bnQuY2xhc3NMaXN0LmFkZCgnYWNjb3VudC0tbG9nZ2VkJyk7XHJcbiAgICB9XHJcbn0iLCJpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnVPcGVuZXInKSkge1xyXG4gICAgY29uc3Qgb3BlbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnVPcGVuZXInKTtcclxuICAgIG9wZW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBvcGVuZXIuY2xhc3NMaXN0LmFkZCgnb3BlbmVyLS1hY3RpdmUnKVxyXG4gICAgfSlcclxuICAgIHdpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPSBvcGVuZXIgJiYgIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoZWNrU3BhbicpKSB7XHJcbiAgICAgICAgICAgIG9wZW5lci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlbmVyLS1hY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSIsImZ1bmN0aW9uIGFjdGl2YXRlTG9nb3V0KCkge1xyXG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LWhlYWRlcicpKSB7XHJcbiAgICAgICAgY29uc3QgbWVudUhlYWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1oZWFkZXInKTtcclxuICAgICAgICBjb25zdCBsb2dvdXRMaW5rID0gbWVudUhlYWFkZXIucXVlcnlTZWxlY3RvcignYScpO1xyXG4gICAgICAgIGNvbnN0IGxvZ291dExpbmtJbk5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvdXRMaW5rJyk7XHJcbiAgICAgICAgbG9nb3V0TGlua0luTmF2LmhyZWYgPSBsb2dvdXRMaW5rLmhyZWY7XHJcblxyXG4gICAgICAgIGxvZ291dExpbmtJbk5hdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2dnZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xvZ2dlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFjY291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWNjb3VudCcpO1xyXG4gICAgICAgICAgICAgICAgYWNjb3VudC5jbGFzc0xpc3QucmVtb3ZlKCdhY2NvdW50LS1sb2dnZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbnNldFRpbWVvdXQoYWN0aXZhdGVMb2dvdXQsIDMwMCkiLCJjb25zdCBwYWdlTG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuY29uc3QgcHJvcHMgPSBbJ9CS0LDRiCDQv9GA0L7RhNC40LvRjCcsICfQktCw0YjQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nXTtcclxuXHJcbmlmIChwYWdlTG9jYXRpb24uaW5jbHVkZXMoJ3Byb2ZpbGUnKSB8fCBwYWdlTG9jYXRpb24uaW5jbHVkZXMoJ3N1YnNjcmlwdGlvbicpKSB7XHJcbiAgICBjb25zdCBhbGxOYXZMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9maWxlLW5hdmlnYXRpb25fX2xpbmsnKTtcclxuICAgIGNvbnN0IHNlY3Rpb25IZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnUHJvZmlsZUhlYWRlcicpO1xyXG4gICAgY29uc3QgYXZhdGFyRnJhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGstc2lkZWJhcicpXHJcbiAgICBhbGxOYXZMaW5rcy5mb3JFYWNoKChsaW5rLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIGlmIChpbmRleCAhPT0gNCkge1xyXG4gICAgICAgICAgICBpZiAobGluay5ocmVmLmluY2x1ZGVzKCd0YWI9Y2hhdCcpXHJcbiAgICAgICAgICAgICAgICAmJiBwYWdlTG9jYXRpb24uaW5jbHVkZXMoJ3RhYj1jaGF0JykpIHtcclxuICAgICAgICAgICAgICAgIGxpbmsuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1uYXZpZ2F0aW9uX19saW5rLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHNlY3Rpb25IZWFkZXIudGV4dENvbnRlbnQgPSBwcm9wc1sxXTtcclxuICAgICAgICAgICAgICAgIGF2YXRhckZyYW1lLmNsYXNzTGlzdC5hZGQoJ2pzLS1oaWRkZW4nKVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmsuaHJlZi5pbmNsdWRlcygndXNlcicpXHJcbiAgICAgICAgICAgICAgICAmJiBwYWdlTG9jYXRpb24uaW5jbHVkZXMoJ3VzZXInKSAmJiAhcGFnZUxvY2F0aW9uLmluY2x1ZGVzKCdjaGF0JykpIHtcclxuICAgICAgICAgICAgICAgIGxpbmsuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1uYXZpZ2F0aW9uX19saW5rLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHNlY3Rpb25IZWFkZXIudGV4dENvbnRlbnQgPSBwcm9wc1swXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5rLmhyZWYuaW5jbHVkZXMoJ3N1YnNjcmlwdGlvbicpXHJcbiAgICAgICAgICAgICAgICAmJiBwYWdlTG9jYXRpb24uaW5jbHVkZXMoJ3N1YnNjcmlwdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5rLmNsYXNzTGlzdC5hZGQoJ3Byb2ZpbGUtbmF2aWdhdGlvbl9fbGluay0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59Il19
