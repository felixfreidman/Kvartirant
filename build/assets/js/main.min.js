"use strict";var openSection,closeSection,shutControls,contactsSection,librarySection,resourcesSection,controlsLink,controlsLinkBase,controlsLinkLibrary,controlsLinkResources,navLinks,address,allStructireContainers,questionForm,init;function toggleContainer(e){e.classList.contains("about-container__structure-container--active-tab")?e.classList.remove("about-container__structure-container--active-tab"):e.classList.add("about-container__structure-container--active-tab")}document.querySelector(".about-container--contacts")&&(openSection=function(e){switch(e.textContent){case"Контакты":closeSection(),contactsSection.classList.remove("js-hide-opacicity");break;case"О библиотеке":closeSection(),librarySection.classList.remove("js-hide-opacicity");break;case"Наши ресурсы":closeSection(),resourcesSection.classList.remove("js-hide-opacicity")}},closeSection=function(){contactsSection.classList.add("js-hide-opacicity"),librarySection.classList.add("js-hide-opacicity"),resourcesSection.classList.add("js-hide-opacicity")},shutControls=function(e){controlsLink.forEach(function(e){e.classList.remove("about-controls__link--active")})},contactsSection=document.querySelector(".about-container--contacts"),librarySection=document.querySelector(".about-container--library"),resourcesSection=document.querySelector(".about-container--resources"),controlsLink=document.querySelectorAll(".about-controls__link"),controlsLinkBase=document.querySelector(".about-controls__link--base"),controlsLinkLibrary=document.querySelector(".about-controls__link--library"),controlsLinkResources=document.querySelector(".about-controls__link--resources"),navLinks=document.querySelectorAll(".header__navigation-link"),(address=window.location.href).includes("#library")?(closeSection(),librarySection.classList.remove("js-hide-opacicity"),controlsLink.forEach(function(e){e.classList.remove("about-controls__link--active")}),controlsLinkLibrary.classList.add("about-controls__link--active")):address.includes("#resources")?(closeSection(),resourcesSection.classList.remove("js-hide-opacicity"),controlsLink.forEach(function(e){e.classList.remove("about-controls__link--active")}),controlsLinkResources.classList.add("about-controls__link--active")):(closeSection(),contactsSection.classList.remove("js-hide-opacicity"),controlsLink.forEach(function(e){e.classList.remove("about-controls__link--active")}),controlsLinkBase.classList.add("about-controls__link--active")),controlsLink.forEach(function(t){t.addEventListener("click",function(){openSection(t),shutControls(t);var e=window.location.href;switch(e=(e=e.replace("#library","")).replace("#resources",""),t.textContent){case"Контакты":e+="";break;case"О библиотеке":e+="#library";break;case"Наши ресурсы":e+="#resources"}window.location.href=e,t.classList.add("about-controls__link--active")})}),navLinks.forEach(function(e){e.addEventListener("click",function(){e.href.includes("#")&&(window.location.href=e.href,location.reload())})})),document.querySelector(".about-container__structure-container")&&(allStructireContainers=document.querySelectorAll(".about-container__structure-container")).forEach(function(e){e.addEventListener("click",function(){toggleContainer(e)})}),document.querySelector(".form-section__form")&&(questionForm=document.querySelector(".form-section__form")).addEventListener("submit",function(e){e.preventDefault()}),document.getElementById("map")&&ymaps.ready(init=function(){var e=new ymaps.Map("map",{center:[52.251308,104.267689],zoom:16}),t=new ymaps.Placemark([52.251308,104.267689],{balloonContentHeader:"Лермонтова, 253",balloonContentBody:"+7 (3952) 48‒66‒80"},{iconLayout:"default#image",iconImageHref:"./assets/images/content/Logo_Simple_Better.png",iconImageSize:[40,40],iconImageOffset:[-20,-22]});e.geoObjects.add(t)});var menuToggler=document.getElementById("MenuToggler"),headerExpanded=document.querySelector(".header--extended"),main=document.querySelector(".main");function manipulateMenu(){menuToggler.classList.toggle("header__menu--opened"),headerExpanded.classList.toggle("header--opened")}function handleClickOutsideBox(e){!menuToggler.contains(e.target)&&menuToggler.classList.contains("header__menu--opened")&&(menuToggler.classList.toggle("header__menu--opened"),headerExpanded.classList.toggle("header--opened"))}menuToggler.addEventListener("click",manipulateMenu),document.addEventListener("click",handleClickOutsideBox);var newsTogglers=document.querySelectorAll(".news-control__toggler"),newsBlocks=document.querySelectorAll(".news-box");function switchLayout(e){console.log(e),e.classList.contains("showAsBlocks")&&!e.classList.contains("news-control__toggler--active")?(shutTogglers(),e.classList.add("news-control__toggler--active"),newsBlocks.forEach(function(e){e.classList.remove("news-box--49p"),e.classList.add("news-box--32p")})):e.classList.contains("showAsList")&&!e.classList.contains("news-control__toggler--active")&&(shutTogglers(),e.classList.add("news-control__toggler--active"),newsBlocks.forEach(function(e){e.classList.add("news-box--49p"),e.classList.remove("news-box--32p")}))}function shutTogglers(){newsTogglers.forEach(function(e){e.classList.remove("news-control__toggler--active")})}newsTogglers.forEach(function(e){e.addEventListener("click",function(){switchLayout(e)})});var swiperNews=new Swiper("#newsSwiper",{speed:400,spaceBetween:20,slidesPerView:3.5,effect:"cards",direction:"horizontal",pagination:{el:".swiper-pagination--news",clickable:!0},navigation:{nextEl:".swiper-button-next--news",prevEl:".swiper-button-prev--news"},breakpoints:{1499:{slidesPerView:3,spaceBetween:20},1220:{slidesPerView:2.5,spaceBetween:20},980:{slidesPerView:2.2,spaceBetween:20},720:{slidesPerView:2,spaceBetween:20},590:{slidesPerView:1.6,spaceBetween:20},520:{slidesPerView:1.4,spaceBetween:20},495:{slidesPerView:1.2,spaceBetween:20},400:{slidesPerView:1.1,spaceBetween:20},370:{slidesPerView:1,spaceBetween:10}}}),swiperBooks=new Swiper("#booksSwiper",{speed:400,effect:"cards",slidesPerView:5,spaceBetween:20,direction:"horizontal",pagination:{el:".swiper-pagination--books",clickable:!0},navigation:{nextEl:".swiper-button-next--books",prevEl:".swiper-button-prev--books"},breakpoints:{1499:{slidesPerView:4,spaceBetween:20},1260:{slidesPerView:3.5,spaceBetween:20},1180:{slidesPerView:6,spaceBetween:20},980:{slidesPerView:5,spaceBetween:20},720:{slidesPerView:4,spaceBetween:20},590:{slidesPerView:3,spaceBetween:20},495:{slidesPerView:2.5,spaceBetween:20},400:{slidesPerView:2,spaceBetween:20},370:{slidesPerView:2,spaceBetween:20}}}),swiperLink=new Swiper("#linksSwiper",{speed:400,spaceBetween:20,slidesPerView:2,effect:"cards",direction:"horizontal",pagination:{el:".swiper-pagination--books",clickable:!0},navigation:{nextEl:".swiper-button-next--books",prevEl:".swiper-button-prev--books"},breakpoints:{1180:{slidesPerView:6,spaceBetween:20},980:{slidesPerView:5,spaceBetween:20},720:{slidesPerView:4,spaceBetween:20},590:{slidesPerView:3,spaceBetween:20},495:{slidesPerView:2,spaceBetween:20}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFib3V0LmpzIiwiYWJvdXRfX2NvbnRhY3RzLmpzIiwiYWpheC5qcyIsIm1hcC5qcyIsIm1lbnVUb2dnbGVyLmpzIiwibmV3c1RvZ2dsZXIuanMiLCJzd2lwZXIuanMiXSwibmFtZXMiOlsib3BlblNlY3Rpb24iLCJjbG9zZVNlY3Rpb24iLCJzaHV0Q29udHJvbHMiLCJjb250YWN0c1NlY3Rpb24iLCJsaWJyYXJ5U2VjdGlvbiIsInJlc291cmNlc1NlY3Rpb24iLCJjb250cm9sc0xpbmsiLCJjb250cm9sc0xpbmtCYXNlIiwiY29udHJvbHNMaW5rTGlicmFyeSIsImNvbnRyb2xzTGlua1Jlc291cmNlcyIsIm5hdkxpbmtzIiwiYWRkcmVzcyIsImFsbFN0cnVjdGlyZUNvbnRhaW5lcnMiLCJxdWVzdGlvbkZvcm0iLCJpbml0IiwidG9nZ2xlQ29udGFpbmVyIiwibm9kZSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJmb3JFYWNoIiwiY29udHJvbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJpbmNsdWRlcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGRyZXNzVGVtcCIsInJlcGxhY2UiLCJsaW5rIiwicmVsb2FkIiwiY29udGFpbmVyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImdldEVsZW1lbnRCeUlkIiwieW1hcHMiLCJyZWFkeSIsIm15TWFwIiwiTWFwIiwiY2VudGVyIiwiem9vbSIsIm15UGxhY2VtYXJrIiwiUGxhY2VtYXJrIiwiYmFsbG9vbkNvbnRlbnRIZWFkZXIiLCJiYWxsb29uQ29udGVudEJvZHkiLCJpY29uTGF5b3V0IiwiaWNvbkltYWdlSHJlZiIsImljb25JbWFnZVNpemUiLCJpY29uSW1hZ2VPZmZzZXQiLCJnZW9PYmplY3RzIiwibWVudVRvZ2dsZXIiLCJoZWFkZXJFeHBhbmRlZCIsIm1haW4iLCJtYW5pcHVsYXRlTWVudSIsInRvZ2dsZSIsImhhbmRsZUNsaWNrT3V0c2lkZUJveCIsInRhcmdldCIsIm5ld3NUb2dnbGVycyIsIm5ld3NCbG9ja3MiLCJzd2l0Y2hMYXlvdXQiLCJjb25zb2xlIiwibG9nIiwic2h1dFRvZ2dsZXJzIiwiYmxvY2siLCJ0b2dnbGVyIiwic3dpcGVyTmV3cyIsIlN3aXBlciIsInNwZWVkIiwic3BhY2VCZXR3ZWVuIiwic2xpZGVzUGVyVmlldyIsImVmZmVjdCIsImRpcmVjdGlvbiIsInBhZ2luYXRpb24iLCJlbCIsImNsaWNrYWJsZSIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJicmVha3BvaW50cyIsIjE0OTkiLCIxMjIwIiwiOTgwIiwiNzIwIiwiNTkwIiwiNTIwIiwiNDk1IiwiNDAwIiwiMzcwIiwic3dpcGVyQm9va3MiLCIxMjYwIiwiMTE4MCIsInN3aXBlckxpbmsiXSwibWFwcGluZ3MiOiJhQUFBLElBb0VBQSxZQWtCQUMsYUFPQUMsYUE1RkFDLGdCQUNBQyxlQUNBQyxpQkFDQUMsYUFDQUMsaUJBQ0FDLG9CQUNBQyxzQkFDQUMsU0FFQUMsUUNUQUMsdUJDb0ZBQyxhQ25GQUMsS0ZPQSxTQUFBQyxnQkFBQUMsR0FDQUEsRUFBQUMsVUFBQUMsU0FBQSxvREFHQUYsRUFBQUMsVUFBQUUsT0FBQSxvREFGQUgsRUFBQUMsVUFBQUcsSUFBQSxvRERYQUMsU0FBQUMsY0FBQSxnQ0FvRUF0QixZQUFBLFNBQUFnQixHQUVBLE9BREFBLEVBQUFPLGFBRUEsSUFBQSxXQUNBdEIsZUFDQUUsZ0JBQUFjLFVBQUFFLE9BQUEscUJBQ0EsTUFDQSxJQUFBLGVBQ0FsQixlQUNBRyxlQUFBYSxVQUFBRSxPQUFBLHFCQUNBLE1BQ0EsSUFBQSxlQUNBbEIsZUFDQUksaUJBQUFZLFVBQUFFLE9BQUEsdUJBS0FsQixhQUFBLFdBQ0FFLGdCQUFBYyxVQUFBRyxJQUFBLHFCQUNBaEIsZUFBQWEsVUFBQUcsSUFBQSxxQkFDQWYsaUJBQUFZLFVBQUFHLElBQUEsc0JBSUFsQixh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SUFFQWlCLElBQUEsQ0FDQWhCLGNBQUEsRUFDQUQsYUFBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hYm91dC1jb250YWluZXItLWNvbnRhY3RzJykpIHtcclxuICAgIGNvbnN0IGNvbnRhY3RzU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hYm91dC1jb250YWluZXItLWNvbnRhY3RzJyk7XHJcbiAgICBjb25zdCBsaWJyYXJ5U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hYm91dC1jb250YWluZXItLWxpYnJhcnknKTtcclxuICAgIGNvbnN0IHJlc291cmNlc1NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWJvdXQtY29udGFpbmVyLS1yZXNvdXJjZXMnKTtcclxuICAgIGNvbnN0IGNvbnRyb2xzTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hYm91dC1jb250cm9sc19fbGluaycpO1xyXG4gICAgY29uc3QgY29udHJvbHNMaW5rQmFzZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hYm91dC1jb250cm9sc19fbGluay0tYmFzZScpO1xyXG4gICAgY29uc3QgY29udHJvbHNMaW5rTGlicmFyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hYm91dC1jb250cm9sc19fbGluay0tbGlicmFyeScpO1xyXG4gICAgY29uc3QgY29udHJvbHNMaW5rUmVzb3VyY2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFib3V0LWNvbnRyb2xzX19saW5rLS1yZXNvdXJjZXMnKTtcclxuICAgIGNvbnN0IG5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlcl9fbmF2aWdhdGlvbi1saW5rJyk7XHJcblxyXG4gICAgY29uc3QgYWRkcmVzcyA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgaWYgKGFkZHJlc3MuaW5jbHVkZXMoJyNsaWJyYXJ5JykpIHtcclxuICAgICAgICBjbG9zZVNlY3Rpb24oKTtcclxuICAgICAgICBsaWJyYXJ5U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdqcy1oaWRlLW9wYWNpY2l0eScpO1xyXG4gICAgICAgIGNvbnRyb2xzTGluay5mb3JFYWNoKGNvbnRyb2wgPT4ge1xyXG4gICAgICAgICAgICBjb250cm9sLmNsYXNzTGlzdC5yZW1vdmUoJ2Fib3V0LWNvbnRyb2xzX19saW5rLS1hY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb250cm9sc0xpbmtMaWJyYXJ5LmNsYXNzTGlzdC5hZGQoJ2Fib3V0LWNvbnRyb2xzX19saW5rLS1hY3RpdmUnKTtcclxuICAgIH0gZWxzZSBpZiAoYWRkcmVzcy5pbmNsdWRlcygnI3Jlc291cmNlcycpKSB7XHJcbiAgICAgICAgY2xvc2VTZWN0aW9uKCk7XHJcbiAgICAgICAgcmVzb3VyY2VzU2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdqcy1oaWRlLW9wYWNpY2l0eScpO1xyXG4gICAgICAgIGNvbnRyb2xzTGluay5mb3JFYWNoKGNvbnRyb2wgPT4ge1xyXG4gICAgICAgICAgICBjb250cm9sLmNsYXNzTGlzdC5yZW1vdmUoJ2Fib3V0LWNvbnRyb2xzX19saW5rLS1hY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb250cm9sc0xpbmtSZXNvdXJjZXMuY2xhc3NMaXN0LmFkZCgnYWJvdXQtY29udHJvbHNfX2xpbmstLWFjdGl2ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjbG9zZVNlY3Rpb24oKTtcclxuICAgICAgICBjb250YWN0c1NlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnanMtaGlkZS1vcGFjaWNpdHknKTtcclxuICAgICAgICBjb250cm9sc0xpbmsuZm9yRWFjaChjb250cm9sID0+IHtcclxuICAgICAgICAgICAgY29udHJvbC5jbGFzc0xpc3QucmVtb3ZlKCdhYm91dC1jb250cm9sc19fbGluay0tYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29udHJvbHNMaW5rQmFzZS5jbGFzc0xpc3QuYWRkKCdhYm91dC1jb250cm9sc19fbGluay0tYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgICBjb250cm9sc0xpbmsuZm9yRWFjaChjb250cm9sID0+IHtcclxuICAgICAgICBjb250cm9sLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBvcGVuU2VjdGlvbihjb250cm9sKTtcclxuICAgICAgICAgICAgc2h1dENvbnRyb2xzKGNvbnRyb2wpO1xyXG4gICAgICAgICAgICBsZXQgYWRkcmVzc1RlbXAgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICAgICAgYWRkcmVzc1RlbXAgPSBhZGRyZXNzVGVtcC5yZXBsYWNlKCcjbGlicmFyeScsICcnKTtcclxuICAgICAgICAgICAgYWRkcmVzc1RlbXAgPSBhZGRyZXNzVGVtcC5yZXBsYWNlKCcjcmVzb3VyY2VzJywgJycpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGNvbnRyb2wudGV4dENvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ9Ca0L7QvdGC0LDQutGC0YsnOlxyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3NUZW1wID0gYWRkcmVzc1RlbXAgKyAnJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlICfQniDQsdC40LHQu9C40L7RgtC10LrQtSc6XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzc1RlbXAgPSBhZGRyZXNzVGVtcCArICcjbGlicmFyeSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSAn0J3QsNGI0Lgg0YDQtdGB0YPRgNGB0YsnOlxyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3NUZW1wID0gYWRkcmVzc1RlbXAgKyAnI3Jlc291cmNlcyc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYWRkcmVzc1RlbXA7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuY2xhc3NMaXN0LmFkZCgnYWJvdXQtY29udHJvbHNfX2xpbmstLWFjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuXHJcbiAgICBuYXZMaW5rcy5mb3JFYWNoKGxpbmsgPT4ge1xyXG4gICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsaW5rLmhyZWYuaW5jbHVkZXMoJyMnKSkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBsaW5rLmhyZWY7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuXHJcbiAgICBmdW5jdGlvbiBvcGVuU2VjdGlvbihub2RlKSB7XHJcbiAgICAgICAgY29uc3QgdGV4dFZhbHVlID0gbm9kZS50ZXh0Q29udGVudDtcclxuICAgICAgICBzd2l0Y2ggKHRleHRWYWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlICfQmtC+0L3RgtCw0LrRgtGLJzpcclxuICAgICAgICAgICAgICAgIGNsb3NlU2VjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgY29udGFjdHNTZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLWhpZGUtb3BhY2ljaXR5Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAn0J4g0LHQuNCx0LvQuNC+0YLQtdC60LUnOlxyXG4gICAgICAgICAgICAgICAgY2xvc2VTZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBsaWJyYXJ5U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdqcy1oaWRlLW9wYWNpY2l0eScpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ9Cd0LDRiNC4INGA0LXRgdGD0YDRgdGLJzpcclxuICAgICAgICAgICAgICAgIGNsb3NlU2VjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzU2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdqcy1oaWRlLW9wYWNpY2l0eScpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsb3NlU2VjdGlvbigpIHtcclxuICAgICAgICBjb250YWN0c1NlY3Rpb24uY2xhc3NMaXN0LmFkZCgnanMtaGlkZS1vcGFjaWNpdHknKTtcclxuICAgICAgICBsaWJyYXJ5U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdqcy1oaWRlLW9wYWNpY2l0eScpO1xyXG4gICAgICAgIHJlc291cmNlc1NlY3Rpb24uY2xhc3NMaXN0LmFkZCgnanMtaGlkZS1vcGFjaWNpdHknKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2h1dENvbnRyb2xzKG5vZGUpIHtcclxuICAgICAgICBjb250cm9sc0xpbmsuZm9yRWFjaChjb250cm9sID0+IHtcclxuICAgICAgICAgICAgY29udHJvbC5jbGFzc0xpc3QucmVtb3ZlKCdhYm91dC1jb250cm9sc19fbGluay0tYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFib3V0LWNvbnRhaW5lcl9fc3RydWN0dXJlLWNvbnRhaW5lcicpKSB7XHJcbiAgICBjb25zdCBhbGxTdHJ1Y3RpcmVDb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFib3V0LWNvbnRhaW5lcl9fc3RydWN0dXJlLWNvbnRhaW5lcicpO1xyXG4gICAgYWxsU3RydWN0aXJlQ29udGFpbmVycy5mb3JFYWNoKGNvbnRhaW5lciA9PiB7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0b2dnbGVDb250YWluZXIoY29udGFpbmVyKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlQ29udGFpbmVyKG5vZGUpIHtcclxuICAgIGlmICghbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2Fib3V0LWNvbnRhaW5lcl9fc3RydWN0dXJlLWNvbnRhaW5lci0tYWN0aXZlLXRhYicpKSB7XHJcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdhYm91dC1jb250YWluZXJfX3N0cnVjdHVyZS1jb250YWluZXItLWFjdGl2ZS10YWInKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdhYm91dC1jb250YWluZXJfX3N0cnVjdHVyZS1jb250YWluZXItLWFjdGl2ZS10YWInKTtcclxuICAgIH1cclxufSIsIi8vIC8vIEFKQVgt0LfQsNC/0YDQvtGBINC00LvRjyDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjQuSDQvdCwINC/0L7Rh9GC0YMsINC60L7RgtC+0YDQsNGPINGD0LrQsNC30LDQvdCwINCyINCw0LTQvNC40L3QutC1INGB0LDQudGC0LBcbi8vICQoZnVuY3Rpb24gKCkge1xuLy8gICAkKFwiI2FwcGx5Rm9ybVwiKS5vbihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZSkge1xuLy8gICAgIGUucHJldmVudERlZmF1bHQoKTtcbi8vICAgICB2YXIgbmFtZSA9ICQoXCIjdXNlck5hbWVcIikudmFsKCk7XG4vLyAgICAgdmFyIHBob25lID0gJChcIiN1c2VyUGhvbmVcIikudmFsKCk7XG4vLyAgICAgdmFyIGNvbXBhbnkgPSAkKFwiI3VzZXJDb21wYW55XCIpLnZhbCgpO1xuLy8gICAgIHZhciBhcmVhID0gJChcIiN1c2VyQXJlYVwiKS52YWwoKTtcblxuLy8gICAgICQuYWpheCh7XG4vLyAgICAgICB0eXBlOiBcInBvc3RcIixcbi8vICAgICAgIHVybDogXCIvd3AtYWRtaW4vYWRtaW4tYWpheC5waHBcIixcbi8vICAgICAgIGRhdGE6IHtcbi8vICAgICAgICAgYWN0aW9uOiBcImFqYXhfZm9ybVwiLFxuLy8gICAgICAgICBuYW1lOiBuYW1lLFxuLy8gICAgICAgICBwaG9uZTogcGhvbmUsXG4vLyAgICAgICAgIGNvbXBhbnk6IGNvbXBhbnksXG4vLyAgICAgICAgIGFyZWE6IGFyZWEsXG4vLyAgICAgICB9LFxuLy8gICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4vLyAgICAgICAgICQoXCIuZGFyay1sYXllclwiKS5odG1sKHJlc3BvbnNlKTtcbi8vICAgICAgICAgY2xvc2VBcHBsaWVkRm9ybSgpO1xuLy8gICAgICAgfSxcbi8vICAgICB9KTtcbi8vICAgfSk7XG4vLyB9KTtcbi8vIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0YfRgtC+INCy0YHQtSDQv9C+0LvRjyDQstCw0LbQvdGL0LUg0LfQsNC/0L7Qu9C90LXQvdGLXG4vLyAkKFwiLmZvcm0tYnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuLy8gICBpbnB1dEF1dGhvcml6YXRpb24oKTtcbi8vIH0pO1xuLy8gLy8g0KLQsNC6INC60LDQuiDQvtC60L3QviDQv9C+0YHQu9C1INC+0YLQv9GA0LDQstC60Lgg0Y8g0LPQtdC90LXRgNC40YDRg9GOINGB0LDQvCwg0LzQvdC1INC90YPQttC90L4g0LXQs9C+INC30LDQutGA0YvQstCw0YLRjCwg0L/QvtGN0YLQvtC80YMg0YTRg9C90LrRhtC40Y8g0LLRi9C30YvQstCw0LXRgtGB0Y8sINC60L7Qs9C00LAg0YLQvtC70YzQutC+INC/0L7Rj9Cy0LvRj9C10YLRgdGPINC+0LrQvdC+XG4vLyBmdW5jdGlvbiBjbG9zZUFwcGxpZWRGb3JtKCkge1xuLy8gICBjb25zdCBkYXJrTGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRhcmstbGF5ZXJcIik7XG4vLyAgIGNvbnN0IGNsb3NlQXBwbGllZEZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsb3NlQXBwbGllZEZvcm1cIik7XG4vLyAgIGNvbnN0IGNsb3NlQXBwbGllZEZvcm1CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbi8vICAgICBcImNsb3NlQXBwbGllZEZvcm1CdXR0b25cIlxuLy8gICApO1xuLy8gICBjbG9zZUFwcGxpZWRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgICAgZGFya0xheWVyLmNsYXNzTGlzdC50b2dnbGUoXCJqcy0taGlkZGVuXCIpO1xuLy8gICB9KTtcbi8vICAgY2xvc2VBcHBsaWVkRm9ybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgIGRhcmtMYXllci5jbGFzc0xpc3QudG9nZ2xlKFwianMtLWhpZGRlblwiKTtcbi8vICAgfSk7XG4vLyB9XG4vLyAvLyDQodCw0LzQsCDRhNGD0L3QutGG0LjRjyDQv9GA0L7QstC10YDQutC4INC/0L7Qu9C10Lkg0Lgg0LTQvtCx0LDQstC70LXQvdC40Y8g0LTQvtC/0L7Qu9C90LjRgtC10LvRjNC90YvRhSDRgdCy0L7QudGB0YLQsiDQv9C+0LvRjlxuLy8gZnVuY3Rpb24gaW5wdXRBdXRob3JpemF0aW9uKCkge1xuLy8gICBjb25zdCBpbnB1dHNBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybS1pbnB1dFwiKTtcbi8vICAgaW5wdXRzQXJyYXkuZm9yRWFjaCgoaW5wdXQpID0+IHtcbi8vICAgICBpZiAoIWlucHV0LnZhbHVlKSB7XG4vLyAgICAgICBjb25zdCBzcGFuID0gYWRkV2FybmluZ0VtcHR5U3BhbigpO1xuLy8gICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZChcImZvcm0taW5wdXQtLXdhcm5pbmdcIik7XG4vLyAgICAgICBjb25zdCBpbnB1dElEID0gaW5wdXQuaWQ7XG4vLyAgICAgICBjb25zdCBpbnB1dExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2Zvcj0ke2lucHV0SUR9XWApO1xuLy8gICAgICAgaW5wdXRMYWJlbC5hcHBlbmRDaGlsZChzcGFuKTtcbi8vICAgICB9XG4vLyAgIH0pO1xuLy8gfVxuXG4vLyAvLyDQndC1INGF0L7RgtC10Lsg0L/QtdGA0LXQs9GA0YPQttCw0YLRjCDRhNGD0L3QutGG0LjRjyDQv9GA0L7QstC10YDQutC4INC4INC/0YDQvtGH0LXQtSwg0L/QvtGN0YLQvtC80YMg0YHQvtC30LTQsNC90LjQtSDQvtGC0LTQtdC70YzQvdC+0LPQviDRgdC/0LDQvdCwINCy0YvQvdC10YEg0L7RgtC00LXQu9GM0L3QvlxuLy8gZnVuY3Rpb24gYWRkV2FybmluZ0VtcHR5U3BhbigpIHtcbi8vICAgY29uc3Qgd2FybmluZ0VtcHR5U3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuLy8gICB3YXJuaW5nRW1wdHlTcGFuLmNsYXNzTGlzdC5hZGQoXCJlbXB0eS0taW5wdXRcIik7XG4vLyAgIHJldHVybiB3YXJuaW5nRW1wdHlTcGFuO1xuLy8gfVxuLy8gLy8g0JrQsNC6INGC0L7Qu9GM0LrQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0YDQtdGI0LjQu9GB0Y8g0LLQstC10YHRgtC4INC00LDQvdC90YvQtSwg0LXRgdC70Lgg0LHRi9C70L4g0L/RgNC10LTRg9C/0YDQtdC20LTQtdC90LjQtSDRjyDRg9C00LDQu9GP0Y4g0L/RgNC10LTRg9C/0YDQtdC20LTQtdC90LjRjyDQstGB0Y/QutC40LVcbi8vIGZ1bmN0aW9uIGRlbGV0ZVdhcm5pbmdTcGFucygpIHtcbi8vICAgY29uc3QgaW5wdXRzQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm0taW5wdXRcIik7XG4vLyAgIGlucHV0c0FycmF5LmZvckVhY2goKGlucHV0KSA9PiB7XG4vLyAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbi8vICAgICAgIGNvbnN0IGlucHV0SUQgPSBpbnB1dC5pZDtcbi8vICAgICAgIGNvbnN0IGlucHV0TGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZm9yPSR7aW5wdXRJRH1dYCk7XG4vLyAgICAgICBpZiAoaW5wdXRMYWJlbC5xdWVyeVNlbGVjdG9yKFwiLmVtcHR5LS1pbnB1dFwiKSkge1xuLy8gICAgICAgICBjb25zdCBjZXJ0YWluU3BhbiA9IGlucHV0TGFiZWwucXVlcnlTZWxlY3RvcihcIi5lbXB0eS0taW5wdXRcIik7XG4vLyAgICAgICAgIGNlcnRhaW5TcGFuLnJlbW92ZSgpO1xuLy8gICAgICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybS1pbnB1dC0td2FybmluZ1wiKTtcbi8vICAgICAgIH1cbi8vICAgICB9KTtcbi8vICAgfSk7XG4vLyB9XG5cbi8vIGRlbGV0ZVdhcm5pbmdTcGFucygpO1xuXG5cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLXNlY3Rpb25fX2Zvcm0nKSkge1xuICAgIGNvbnN0IHF1ZXN0aW9uRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLXNlY3Rpb25fX2Zvcm0nKTtcblxuICAgIHF1ZXN0aW9uRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KVxufSIsImlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJykpIHtcclxuICAgIHltYXBzLnJlYWR5KGluaXQpO1xyXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAvLyDQodC+0LfQtNCw0L3QuNC1INC60LDRgNGC0YsuXHJcbiAgICAgICAgdmFyIG15TWFwID0gbmV3IHltYXBzLk1hcChcIm1hcFwiLCB7XHJcbiAgICAgICAgICAgIGNlbnRlcjogWzUyLjI1MTMwOCwgMTA0LjI2NzY4OV0sXHJcbiAgICAgICAgICAgIHpvb206IDE2XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG15UGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhbNTIuMjUxMzA4LCAxMDQuMjY3Njg5XSwge1xyXG4gICAgICAgICAgICBiYWxsb29uQ29udGVudEhlYWRlcjogJ9Cb0LXRgNC80L7QvdGC0L7QstCwLCAyNTMnLFxyXG4gICAgICAgICAgICBiYWxsb29uQ29udGVudEJvZHk6IGArNyAoMzk1MikgNDjigJI2NuKAkjgwYCxcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcclxuICAgICAgICAgICAgaWNvbkltYWdlSHJlZjogJy4vYXNzZXRzL2ltYWdlcy9jb250ZW50L0xvZ29fU2ltcGxlX0JldHRlci5wbmcnLFxyXG4gICAgICAgICAgICBpY29uSW1hZ2VTaXplOiBbNDAsIDQwXSxcclxuICAgICAgICAgICAgaWNvbkltYWdlT2Zmc2V0OiBbLTIwLCAtMjJdXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG15TWFwLmdlb09iamVjdHMuYWRkKG15UGxhY2VtYXJrKTtcclxuICAgIH1cclxufSIsImNvbnN0IG1lbnVUb2dnbGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ01lbnVUb2dnbGVyJyk7XHJcbmNvbnN0IGhlYWRlckV4cGFuZGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci0tZXh0ZW5kZWQnKTtcclxuY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJyk7XHJcblxyXG5mdW5jdGlvbiBtYW5pcHVsYXRlTWVudSgpIHtcclxuICAgIG1lbnVUb2dnbGVyLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9fbWVudS0tb3BlbmVkJyk7XHJcbiAgICBoZWFkZXJFeHBhbmRlZC5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXItLW9wZW5lZCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDbGlja091dHNpZGVCb3goZXZlbnQpIHtcclxuICAgIGlmICghbWVudVRvZ2dsZXIuY29udGFpbnMoZXZlbnQudGFyZ2V0KSAmJiBtZW51VG9nZ2xlci5jbGFzc0xpc3QuY29udGFpbnMoJ2hlYWRlcl9fbWVudS0tb3BlbmVkJykpIHtcclxuICAgICAgICBtZW51VG9nZ2xlci5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX21lbnUtLW9wZW5lZCcpO1xyXG4gICAgICAgIGhlYWRlckV4cGFuZGVkLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlci0tb3BlbmVkJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1lbnVUb2dnbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbWFuaXB1bGF0ZU1lbnUpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGlja091dHNpZGVCb3gpOyIsImNvbnN0IG5ld3NUb2dnbGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uZXdzLWNvbnRyb2xfX3RvZ2dsZXInKTtcclxuY29uc3QgbmV3c0Jsb2NrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uZXdzLWJveCcpO1xyXG5cclxubmV3c1RvZ2dsZXJzLmZvckVhY2godG9nZ2xlciA9PiB7XHJcbiAgICB0b2dnbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIHN3aXRjaExheW91dCh0b2dnbGVyKVxyXG4gICAgfSlcclxufSlcclxuXHJcbmZ1bmN0aW9uIHN3aXRjaExheW91dChub2RlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhub2RlKTtcclxuICAgIGlmIChub2RlLmNsYXNzTGlzdC5jb250YWlucygnc2hvd0FzQmxvY2tzJykgJiYgIW5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCduZXdzLWNvbnRyb2xfX3RvZ2dsZXItLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgc2h1dFRvZ2dsZXJzKCk7XHJcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCduZXdzLWNvbnRyb2xfX3RvZ2dsZXItLWFjdGl2ZScpO1xyXG4gICAgICAgIG5ld3NCbG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgICAgIGJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ25ld3MtYm94LS00OXAnKTtcclxuICAgICAgICAgICAgYmxvY2suY2xhc3NMaXN0LmFkZCgnbmV3cy1ib3gtLTMycCcpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9IGVsc2UgaWYgKG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93QXNMaXN0JykgJiYgIW5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCduZXdzLWNvbnRyb2xfX3RvZ2dsZXItLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgc2h1dFRvZ2dsZXJzKCk7XHJcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCduZXdzLWNvbnRyb2xfX3RvZ2dsZXItLWFjdGl2ZScpO1xyXG4gICAgICAgIG5ld3NCbG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgICAgIGJsb2NrLmNsYXNzTGlzdC5hZGQoJ25ld3MtYm94LS00OXAnKTtcclxuICAgICAgICAgICAgYmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnbmV3cy1ib3gtLTMycCcpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNodXRUb2dnbGVycygpIHtcclxuICAgIG5ld3NUb2dnbGVycy5mb3JFYWNoKHRvZ2dsZXIgPT4ge1xyXG4gICAgICAgIHRvZ2dsZXIuY2xhc3NMaXN0LnJlbW92ZSgnbmV3cy1jb250cm9sX190b2dnbGVyLS1hY3RpdmUnKTtcclxuICAgIH0pXHJcbn0iLCIvLyBTd2lwZXIgU2VjdGlvblxyXG5cclxuY29uc3Qgc3dpcGVyTmV3cyA9IG5ldyBTd2lwZXIoJyNuZXdzU3dpcGVyJywge1xyXG4gICAgc3BlZWQ6IDQwMCxcclxuICAgIHNwYWNlQmV0d2VlbjogMjAsXHJcbiAgICBzbGlkZXNQZXJWaWV3OiAzLjUsXHJcbiAgICBlZmZlY3Q6ICdjYXJkcycsXHJcbiAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbi0tbmV3cycsXHJcbiAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICBuZXh0RWw6ICcuc3dpcGVyLWJ1dHRvbi1uZXh0LS1uZXdzJyxcclxuICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2LS1uZXdzJyxcclxuICAgIH0sXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgIDE0OTk6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgMTIyMDoge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLjUsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjBcclxuICAgICAgICB9LFxyXG4gICAgICAgIDk4MDoge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLjIsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjBcclxuICAgICAgICB9LFxyXG4gICAgICAgIDcyMDoge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwXHJcbiAgICAgICAgfSxcclxuICAgICAgICA1OTA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMS42LFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwXHJcbiAgICAgICAgfSxcclxuICAgICAgICA1MjA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMS40LFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwXHJcbiAgICAgICAgfSxcclxuICAgICAgICA0OTU6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMS4yLFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwXHJcbiAgICAgICAgfSxcclxuICAgICAgICA0MDA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMS4xLFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwXHJcbiAgICAgICAgfSxcclxuICAgICAgICAzNzA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IHN3aXBlckJvb2tzID0gbmV3IFN3aXBlcignI2Jvb2tzU3dpcGVyJywge1xyXG4gICAgc3BlZWQ6IDQwMCxcclxuICAgIGVmZmVjdDogJ2NhcmRzJyxcclxuICAgIHNsaWRlc1BlclZpZXc6IDUsXHJcbiAgICBzcGFjZUJldHdlZW46IDIwLFxyXG4gICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24tLWJvb2tzJyxcclxuICAgICAgICBjbGlja2FibGU6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQtLWJvb2tzJyxcclxuICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2LS1ib29rcycsXHJcbiAgICB9LFxyXG4gICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAxNDk5OiB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjBcclxuICAgICAgICB9LFxyXG4gICAgICAgIDEyNjA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMy41LFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwXHJcbiAgICAgICAgfSxcclxuICAgICAgICAxMTgwOiB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDYsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjBcclxuICAgICAgICB9LFxyXG4gICAgICAgIDk4MDoge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA1LFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwXHJcbiAgICAgICAgfSxcclxuICAgICAgICA3MjA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogNCxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgNTkwOiB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjBcclxuICAgICAgICB9LFxyXG4gICAgICAgIDQ5NToge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLjUsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjBcclxuICAgICAgICB9LFxyXG4gICAgICAgIDQwMDoge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwXHJcbiAgICAgICAgfSxcclxuICAgICAgICAzNzA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IHN3aXBlckxpbmsgPSBuZXcgU3dpcGVyKCcjbGlua3NTd2lwZXInLCB7XHJcbiAgICBzcGVlZDogNDAwLFxyXG4gICAgc3BhY2VCZXR3ZWVuOiAyMCxcclxuICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICBlZmZlY3Q6ICdjYXJkcycsXHJcbiAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbi0tYm9va3MnLFxyXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dC0tYm9va3MnLFxyXG4gICAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYtLWJvb2tzJyxcclxuICAgIH0sXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgIDExODA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogNixcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgOTgwOiB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDUsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjBcclxuICAgICAgICB9LFxyXG4gICAgICAgIDcyMDoge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA0LFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwXHJcbiAgICAgICAgfSxcclxuICAgICAgICA1OTA6IHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgNDk1OiB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjBcclxuICAgICAgICB9LFxyXG5cclxuXHJcblxyXG4gICAgfVxyXG59KTsiXX0=
